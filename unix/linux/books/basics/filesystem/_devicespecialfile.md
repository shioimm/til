# デバイススペシャルファイル
- 参照: Linuxプログラミングインターフェース 14章
- 参照: 例解UNIX/Linuxプログラミング教室P375-432

## TL;DR
- システムに接続されたデバイスに対応するファイル
  - デバイス種類ごとにデバイスドライバが存在し、
    対象デバイスのすべてのIOリクエストを処理する
- デバイスファイル = 端末 + デバイス
  - デバイスファイルは`/dev`以下に配置される
  - デバイスファイルはエスケープシーケンスを解釈する
  - デバイスファイルは端末ラインディシプリンを持つ
  - デバイスファイルか通常のファイルかによって動作が異なるプログラムが存在する

## デバイスドライバ
- デバイスへの一連の処理を実装したカーネルモジュール
- 統一インターフェースに対応するAPIを持つ

## デバイス
- 実デバイス - ハードウェアに対応する物理的なデバイス
- 仮想デバイス - ハードウェアに対応しない抽象化された擬似的なデバイス

### デバイスの型
- デバイスはキャラクタ型 / ブロック型に分類できる

#### キャラクタ型
- データをバイト単位に処理する
- 読み書きできる
- シークできない
- Ex. 端末、キーボード、マウス

#### ブロック型
- データをブロック単位(通常512バイトの整数倍)に処理する
- 読み書きできる
- ランダムアクセスできる
- ファイルシステムを作成・マウントすることによってファイルシステム経由で使用する
- カーネル内のブロックデバイス層によって処理を管理される(Ex. IOスケジューリング、先読み)
- ファイルシステムを作成・マウントすることによってファイルシステム経由で使用する
- Ex. ディスクドライブ

### デバイスID
- デバイスはメジャー番号 / マイナー番号を持つ
- デバイスIDはデバイスファイルのi-nodeに格納される
- デバイスドライバはメジャー番号に対応する自信が処理するデバイスの情報を登録する
  登録情報がデバイスファイルとデバイスドライバを関連づける
  (カーネルはデバイスドライバの検索にデバイスファイル名を使用しない)

#### メジャー番号
- デバイスの種類を表す番号
- カーネルがその種類のデバイスに対応するドライバを検索する際に使用される

#### マイナー番号
- デバイスを特定する番号
- 同じデバイスの型・メジャー番号を持つデバイスのグループ内でデバイスを識別する際に使用される
