# gdb
#### デバッグ
1. 起動 (デバッグする対象のバイナリをフルパスで指定)
2. コードを実行
3. バックトレースを表示
4. 周辺のコードを表示
5. `<変数名>`の値を出力
6. gdbを終了

```
$ gdb /usr/bin/ruby

(gdb) run -e 'p hello'
(gdb) bt
(gdb) l
(gdb) p <変数名>
(gdb) q
```

#### 不具合がないことを検証

```
$ gdb /usr/bin/ruby

(gdb) b <関数名>
(gdb) run -e 'p hello'
```

## 操作

| 操作                    | 意味                                                               |
| -                       | -                                                                  |
| break 関数名            | 関数にブレークポイントを設定                                       |
| break ファイル名:行番号 | ファイル名:行番号にブレークポイントを設定                          |
| run -e 'コード'         | コードを実行                                                       |
| run -n 行番号           | ソースコードの行番号を指定してコードを実行                         |
| backtrace               | バックトレースを表示                                               |
| list                    | 現在のコンテキストの周辺の実コードを表示                           |
| print 変数名、関数名    | printデバッグ                                                      |
| next                    | ステップアウト実行 (現在実行中の関数をステップ実行)                |
| continue                | プログラムの実行を再開                                             |
| step                    | ステップイン実行 (別の関数に入った場合はその関数でもステップ実行)  |
| info レジスタ名         | レジスタの詳細の確認                                               |
| patto 文字数            | 指定の数の文字列を生成する                                         |
| patto 文字列            | 指定の文字列の`pattc`で生成した文字列における位置を表示            |

#### 実行中のプロセスにアタッチ
```
$ gdb -p デバッグするプロセスID
```

## 参照
- 独習アセンブラ
- Webで使えるmrubyシステムプログラミング入門
- はじめて学ぶバイナリ解析 不正なコード型コンピュータを守るサイバーセキュリティ技術
