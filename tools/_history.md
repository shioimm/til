# Webアプリケーションの動作パターン
## 第1世代:サーバーサイドレンダリング(SSR)
- レンダリングに必要なデータをテンプレートに展開してHTMLを生成し、HTTP経由でクライアントへ渡す
  - クライアント側からは静的HTMLとSSRは同じ挙動に見える

#### テンプレートエンジン
- データを展開しHTMLを生成する仕組み
  - 変数の展開
  - ループ
  - 条件付きブロック
  - ブロック展開
  - ファイルのインクルード

## 第2世代:Ajax
- クライアントサイドのJavaScriptを使用してサーバーへアクセスし、動的に画面を更新する
  - 画面をクリアすることなくサーバーから取得したデータをブラウザに反映する
  - 最初に読み込まれる土台となるHTMLはSSRもしくは静的なページ

#### AjaxのためのAPI
- XMLHttpRequest
- Server−Sent Events
- WebSockets
- Fetch

## 第3世代:シングルページアプリケーション
- JavaScriptのソースをロードするだけのほぼ空のHTMLを用意し、
  内部でHTMLを生成して、一方通行でDOMを書き換える
- 仮想DOMの仕組みを備えたJavaScriptフレームワークを利用することにより、
  コンポーネントの形でテンプレートを入れ替えることが可能になった
- SPAを配信するためフロント側のサーバーやCDNでは、
  どのURLへのリクエストを受け取ってもトップと同じHTMLファイルを返す設定が必要

#### 利点
- 画面遷移が高速

#### 欠点
- 初回の画面描画が遅い(JavaScriptソースのロードが終わるまで画面が表示されない)

#### 仮想DOM
- 画面を高速に差分更新する仕組み
- React、Vue.jsに(2系以降)組み込まれている

#### SPAのためのライブラリ
- Router
  - History APIのラッパー
  - 親ページから子ページへの移動時、ブラウザをリセットせずに画面を高速に描画し、アドレスバーを書き換える
- Polyfill
  - 古いバージョンのブラウザに足りない機能を動的に保管する

## 第3.5世代:シングルページアプリケーション + サーバーサイドレンダリング
- 初回の画面描画に時間がかかるというSPAの欠点をカバーする
- 初回のリクエスト時、SPAのコードをサーバー側で動かし、動的にHTMLファイルを生成してブラウザに返す
  - 初回に描画されたHTMLはSPAとして動作するためのイベントハンドラを持たない
  - JavaScriptのロードが終わり、HTMLの中身が置き換わると以降はSPAと同じように操作が可能

## 参照
- Real World HTTP 第2版
