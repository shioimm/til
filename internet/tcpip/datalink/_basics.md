# データリンク層
- ネットワークの物理リンク上へフレームを送信し、宛先からの確認応答を受信する
  - ネットワーク層からのデータグラムをフレーム単位にカプセル化して送受信する
- 送信時には各フレームの宛先アドレス・フレームサイズをヘッダとして付加する
  - フレームサイズ上限をMTU(最大転送ユニット)という
  - MTUの最大値はPath MTU Discovery技術(内部的にICMPを使用する)によって探索される
- 物理層で発生した誤りを検出したり、訂正したりする
  - 送信元はビットストリームを不連続なフレームに区切り、フレームごとにチェックサムを付与する
  - 送信先はビットストリームを不連続なフレームに区切り、フレームごとにチェックサムを再計算する

## ブリッジ(L2スイッチ)
- データリンク層でネットワーク同士を接続する機器
  - 物理アドレス(MACアドレス)で処理を行う
- ブリッジはフレームの転送及びフォワーディングテーブルの保持・更新を行う
- Ethernetで使用されるスイッチングハブはブリッジの一種
  - ケーブルを接続するポートが全てブリッジになっているかのように機能する

### フォワーディングテーブル
- ブリッジの各ポートとポートに接続された各ネットワーク機器のMACアドレスの対応表
- 多くのブリッジは一度通過したMACアドレスを一定時間フォワーディングテーブルに保存する

### 動作の仕組み
1. ブリッジはフレームを受信し、ブリッジ内部のメモリに一旦蓄積する
2. ブリッジはフレームの送信先MACアドレスを読み取り、フォワーディングテーブルを利用して送信先を確認する
3. ブリッジは該当MACアドレスを持つ機器の接続されたポートに向かってフレームを送信する
- ブロードキャスト通信においては、同じブリッジが担う範囲において複数のネットワーク機器へフレームを送出する
 データリンク層のハードウェアはフロー制御の必要がない程度に十分に早く動作するよう設計される

## 誤り検出・訂正戦略
- ブリッジはフレームに含まれるFCS(Frame Check Sequence)フィールドでフレームの誤りを検出し、
  壊れたフレームを他のセグメントへ送信しないようにする

#### 誤り率が低く再送コストが低い場合(光ファイバなど):
- 誤り検出符号をチェックサムとして付与する
  - ハミング符号
  - 2乗畳み込み符号
  - リード・ソロモン符号
  - 低密度パリティ検査符号

#### 誤り率が高く再送コストが高い場合(無線リンクなど):
- 誤り訂正符号をチェックサムとして付与する
  - パリティ
  - チェックサム
  - 巡回冗長検査(CRC)

## 通信種別
- ユニキャスト - 1:1通信
- マルチキャスト - 複数ノードへ一斉同報
- ブロードキャスト - 特性のネットワーク内の全ノードへ一斉同報
- エニーキャスト - 同じIPアドレスを持つ複数ノードへ一斉同報

## 参照
- Linuxプログラミングインターフェース 58章
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 2.8-9
- Linuxで動かしながら学ぶTCP/IPネットワーク入門 4.5
- コンピュータネットワーク
- マスタリングTCP/IP 入門編
