# トランスポート層
- 異なるホスト上のアプリケーション間E2E通信を行う
  - ホスト上のアプリケーションを特定する方法として16ビットのポート番号を使用する

## 機器
### L4-7スイッチ
- トランスポート層からアプリケーション層までの階層で、配送処理を行う機器
- トランスポート層とアプリケーション層において送受信されている通信の内容を分析し、特定の処理を行う
  - Ex. ロードバランサ、WANアクセラレータ、ファイアウォール

### ゲートウェイ
- トランスポート層からアプリケーション層までの階層で、データを変換して中継する機器
- トランスポート層とアプリケーション層において送受信されている通信の内容を分析し、異なるプロトコルの翻訳を行い中継する
  - Ex. プロキシサーバー

## ポート番号
- well-knownポート
  - 特定のアプリケーションに固定的に割り当てられるポート番号
- 登録済みポート
  - アプリケーション開発者が割り当てるポート番号(1024-49151)
- 特権ポート
  - 特権プロセスのみがバインドできるポート番号(0-1023)
- エフェメラルポート
  - アプリケーションが明示的に番号を選択しない場合、一時的に割り当てられるポート番号
  - [Linux]`/proc/sys/net/ipv4/local_port_range`の範囲内

## UDP
- User Datagram Protocol
- データグラムソケットが使用するコネクションレスプロトコル
- アプリケーション層からは`SOCK_DGRAM`で通信を行う

## TCP
- Transmission Control Protocol
- ストリームソケットが使用するコネクション指向のプロトコル
- アプリケーション層からは`SOCK_STREAM`で通信を行う

## SCTP / DCCP
- トランスポート層の比較的新しいプロトコル
- SCTP - Stream Control Transmission Protocol
  - 信頼性・双方向性を備えたコネクション指向のプロトコル
  - メッセージ区切りを維持する
  - マルチストリーム(1コネクション上で複数の論理データストリームを実現する)
- DCCP - Datagram Congestion Control Protocol
  - 信頼性や順序の維持を保証しない
  - 輻輳制御機能を持つ

## 参照
- Linuxプログラミングインターフェース 58章
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 2.8-9
- Linuxで動かしながら学ぶTCP/IPネットワーク入門 4.5
- コンピュータネットワーク
- マスタリングTCP/IP 入門編
