# ICMP
- Internet Control Message Protocol
- インターネット制御メッセージプロトコル
- インターネットプロトコルのデータグラム処理における誤りの通知や通信に関する情報の通知に使用される
- ルーティングテーブルが正しいか検査したり、ルーティングテーブルに異常がある場合に通知する
- ICMPメッセージは一つのIPパケットの中にカプセル化される
- C言語で扱うためのインターフェースは`/usr/include/netinet/ip_icmp.h`にて定義される

## メッセージタイプ

| タイプ | 意味       | 説明                         |
| -      | -          | -                            |
| 0      | エコー応答 | エコー要求への応答           |
| 3      | 到達不能   | 転送先にパケットが届かない   |
| 5      | 転送先変更 | 効率が悪い経路の変更         |
| 8      | エコー要求 | エコー応答の要求             |
| 11     | 時間超過   | ループが発生している場合など |

## `ping(1)`
- ICMPパケットのうちICMP Echo Request / ICMP Echo Responseを利用して疎通確認を行う
- 2つのTCP/IPノード間でICMPパケットの送受信を行う

## 参照
- Linuxプログラミングインターフェース 58章
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 2.8-9
- Linuxで動かしながら学ぶTCP/IPネットワーク入門 4.5
- コンピュータネットワーク
