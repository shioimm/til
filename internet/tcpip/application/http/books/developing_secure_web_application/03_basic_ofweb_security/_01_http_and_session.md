# 安全なWebアプリケーションの作り方(脆弱性が生まれる原理と対策の実践) まとめ
- 徳丸浩 著

## 01 HTTP / セッション管理
### Form関連
#### HTTPメソッド
- GET
  - 副作用のないリソースの取得に利用する
- POST
  - 副作用を伴うリクエスト、大量のデータ送信、秘密情報の送信に使用する

#### hiddenパラメータ
- 利用者から書き換えが可能
- 第三者からの書き換えに対しては堅牢
- 認証や認可に関する情報 -> セッション変数
- それ以外の情報 -> hiddenパラメータ

### Basic認証
- クライアントはAuthenticationヘッダに認証情報を付与してリクエストメッセージを送信し、
  サーバーが認証を行う
```
Authentication: Basic xxxxxx(IDとpassを:で区切ってBase64エンコードした英数字)
```
- 認証後はクライアントがリクエストを送信するたび自動的にAuthenticationgヘッダを追加する

### セッション管理 / Cookie
- サーバー側で認証状態を覚えておく仕組み = セッション管理(クッキーなど)
- サーバーからクライアントへSet-CookieヘッダにセッションIDを付与してレスポンスメッセージを送信し、
  クライアントがセッションIDを保存する
- クライアントはリクエストを送信するたび自動的にCookieヘッダを追加する
  - セッションIDは利用者によって参照・変更できる

#### セッションID
```
## 要件
1. 第三者がセッションIDを推測できない
2. 第三者からセッションIDを強制されない
3. 第三者にセッションIDが漏洩しない
```
- セッションIDは暗号論的擬似乱数生成器によって生成する
  - 開発ツールの提供するセッション管理機構を利用する

#### セキュリティに関連するCookie属性
- Domain属性 -> Cokkieを送信するドメインを制限する(原則デフォルト)
- Secure属性 -> HTTPS通信の場合のみサーバーに送信されるようにする
- HttpOnly属性 -> JSからアクセスできないCookieを設定する
