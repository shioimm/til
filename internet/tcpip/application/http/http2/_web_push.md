# HTTP Webプッシュ
- Webサイトにプッシュ通知機能を提供する仕組み
- ブラウザが起動していない場合やオフラインでも通知を送ることができる
- ブラウザの通知許可との連携が必要

## 技術的要素
### ServiceWorker
- サーバーとクライアントの間にあるプロキシサーバーのような存在
- `addEventListener()`イベントハンドラを登録しておくことによって必要時のみ起動して処理を行う

| イベント名 | コールバックイベント               |
| -          | -                                  |
| activate   | インストール時                     |
| message    | クライアントからのpostMessage()    |
| fetch      | クライアントからサーバーへアクセス |
| push       | クライアントがプッシュ通知を受信   |

## 利用手順
1. ブラウザ起動時にユーザーへプッシュ通知の許可を得る
2. ブラウザがプッシュサービスに購読を申し込む
    - プッシュサービスがブラウザを特定する際に使用する鍵が作成される
3. ブラウザがアプリケーションサーバーに鍵を送信する
    - 以降、アプリケーションサーバーは特定のブラウザに対して送信が可能になる
4. サーバーがプッシュサービスへメッセージを送信(HTTP)
5. ブラウザがプッシュサービスからメッセージを受信

## 参照
- Real World HTTP 第2版
