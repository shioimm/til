# Keep-Alive
- 参照: Real World HTTP 第2版

## TL;DR
- 高速化のためにアクセスごとの接続にかかる時間を削減する仕組み(1.5TTL)
- 連続したリクエスト時に接続を再利用する
  - ハンドシェイク回数を削減することで接続までの待ち時間が減り、
    見た目のスループットが向上し、通信速度が上がる
  - Keep-Aliveを使用しない場合は一つのリクエストごとに通信を閉じる
- HTTP/2では常に有効であるためKeep-Aliveヘッダの使用は禁止されている

## 仕組み
- クライアントから`Connection: Keep-Alive`を送信し、サーバーが同じヘッダを送信し返すことで有効化する
  - HTTP/1.1以降はデフォルトで有効化されている
- クライアント・サーバーのいずれかが`Connection: close`を送信することで無効化する

## パイプライニング(HTTP/1.1)
- 高速化のために通信を多重化する仕組み
- Keep-Aliveの利用を前提とする
- 仕様に入ったが広く使われることはなかった
- その後の高速化の改良の基礎となった

### 仕組み
- 最初のリクエストが完了する前に次のリクエストを送信する
  - レスポンスを待って次のリクエスト出すまでの待ち時間を排除する
  - ネットワークの稼働率を上げ、パフォーマンスを向上させる
- 仕様上、サーバーはリクエストが来た順序でレスポンスを返す必要がある
