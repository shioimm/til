# 暗号化技術
## OSI参照モデルにおける暗号化技術

| 階層                           | 暗号化技術                                                        |
| -                              | -                                                                 |
| アプリケーション層             | SSH, SSL-Telnet, PETなど遠隔ログイン, PGP, S/MIMEなど暗号化メール |
| セッション層・トランスポート層 | SSL/TLS, SOCKSv5の暗号化                                          |
| ネットワーク層                 | IPSec                                                             |
| データリンク層                 | Ethernet, WANの暗号化装置, PPTP                                   |

## 暗号方式
#### 共通鍵暗号方式
1. 送信者-受信者間で暗号化アルゴリズムを取り決める
2. 送信者-受信者間で共通鍵を取り決める
3. 送信者は共通鍵を使用してデータを暗号化し、送信する
4. 受信者は暗号化されたデータを受信し、共通鍵で復号化する
- 暗号化と復号化の処理が高速
- 通信相手ごとに鍵が必要であり、鍵の管理が困難

#### 公開鍵暗号方式
1. 送信者-受信者間で暗号化アルゴリズムを取り決める
    - 受信者は暗号化する鍵(公開鍵)を公開している
    - 受信者は復号化する鍵(秘密鍵)を公開していない
2. 送信者は受信者の公開鍵を使用してデータを暗号化し、送信する
3. 受信者は暗号化されたデータを受信し、秘密鍵で復号化する
- 鍵の管理と配布が簡単
- 暗号化と復号化の処理に時間がかかる

#### ハイブリッド暗号方式
1. 送信者-受信者間で暗号化アルゴリズムを取り決める
2. 送信者-受信者間で共通鍵を取り決める
3. 送信者は共通鍵を使用してデータを暗号化する
4. 送信者は受信者の公開鍵を使用して共通鍵を暗号化する
5. 送信者は暗号化したデータと暗号化した共通鍵を送信する
6. 受信者は暗号化されたデータと暗号化された共通鍵をを受信する
7. 受信者は暗号化された共通鍵を秘密鍵で復号化する
8. 受信者は暗号化されたデータを共通鍵で復号化する

## 認証技術
- ある情報を持っていることによる認証(パスワード、暗証コードなど)
- あるものを持っていることによる認証(電子証明書、鍵、電話番号など)
- ある特徴を持っていることによる認証

## 鍵生成
1. マスターシークレットおよびシードから、PRFを一回適用して鍵ブロックを生成する
2. 鍵ブロックを最大6個に分割する
    - MAC鍵2つ
    - 暗号鍵2つ
    - IV2つ(必要時)

### 擬似乱数生成器
- PRF(pseudorandom function)
- シークレット、シード、一意なラベルを引数に取り、任意の長さの疑似乱数を生成する

### マスターシークレット
- 鍵交換プロトコルから得られるプリマスターシークレット値を、PRFを使って処理することで生成する48バイト(384ビット)の値

## 参照
- 食べる！SSL！　―HTTPS環境構築から始めるSSL入門
- プロフェッショナルSSL/TLS
- マスタリングTCP/IP 入門編
