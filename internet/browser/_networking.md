# ブラウザネットワーキング
## ソケット接続管理と最適化
- ブラウザはネットワークソケットを管理する
  - ソケットの再利用
  - リクエスト優先度付け
  - レイトバインディング
  - プロトコルネゴシエーション
  - 接続数制限の実施

### ソケットプール
- ソケットはオリジンごとにグループ化され、プールされる
  - 各プールには接続せ永源とセキュリティ制約が与えられる
  - 送信待ち状態のリクエストはキューに入れられ、優先度を付与され、プール内の個別のソケットにバインドされる
  - 同じソケエットが複数のリクエストで再利用される
- 最大プールサイズは6ソケット

## ネットワークセキュリティとサンドボックス化
- ソケット管理をブラウザが担うことにより、ブラウザをサンドボックスとして利用し、
  信頼できないアプリケーションコードに対して一定のセキュリティやポリシーの制約をかけることができる
  - 接続数制限
  - リクエスト整形とレスポンス処理
  - TLSネゴシエーション
  - 同一生成元ポリシー

## リソースとクライアント状態キャッシュ
- リクエスト送信時、ブラウザは自動的にリソースキャッシュを確認し、必要な検証を行い、
  指定された制限が満たされるとリソースのローカルコピーを返す
- ローカルリソースが使用不可能である場合はネットワークリクエストを行う
- レスポンスに対してキャッシュが許可される場合は自動的にキャッシュに保存する
- ブラウザはオリジンごとに個別のCookieを保存し、必要時にリクエストヘッダに書き込む

## アプリケーションAPIとプロトコル

| -                          | XMLHttpRequest | Server-Sent Events | WebSocket            |
| -                          | -              | -                  | -                    |
| リクエストストリーミング   | ×              | ×                  | ○                    |
| レスポンスストリーミング   | 制限あり       | ○                  | ○                    |
| フレーミングメカニズム     | HTTP           | イベントストリーム | バイナリフレーミング |
| バイナリデータ転送         | ○              | ×(base64)          | ○                    |
| 圧縮                       | ○              | ○                  | 制限あり             |
| アプリケーションプロトコル | HTTP           | HTTP               | WebSocket            |
| ネットワークプロトコル     | HTTP           | HTTP               | WebSocket            |

## 参照
- ハイパフォーマンスブラウザネットワーキング
