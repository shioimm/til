# make
- ソースコードからの実行ファイルをビルドするために用いられる自動化ツール
- Makefileに記述された一連の手順に従ってコマンド実行などを行う
- makeコマンド実行時にはMakefileと併せてソースファイルと設定ファイルconfig.hが必要

#### ドライラン
```
$ make -n
```

## Makefile
```
# ターゲット: ターゲットが依存するファイル群
#   ターゲットを生成するための一連の命令

prog.o: prog.c prog.h lib.h
  gcc -c prog.c

lib.o: lib.c lib.h
  gcc -c lib.c

prog: prog.o lib.o
  gcc prog.o lib.o -o prog
```

```
$ ls
lib.c   lib.h   prog.c  Makefile

$ make prog
```

#### makeが保持する特殊変数
| 変数名   | 説明                                                                           |
| -        | -                                                                              |
| $$       | $記号                                                                          |
| $@       | 作成するファイルの名前                                                         |
| $?       | ターゲットより新しいファイルの名前                                             |
| $>       | ターゲットの全てのソースのリスト (GNU makeでは$^)                              |
| $<       | ターゲットオン変換元ファイルの名前                                             |
| $*       | ターゲットから先行のディレクトリコンポーネント・サフィックスを除いたファイル名 |

#### Makefileでよく使われるユーザー変数
| 変数名   | 説明                    |
| -        | -                       |
| SRCS     | ソースファイル          |
| INCLUDES | ヘッダファイル          |
| OBJS     | オブジェクトファイル    |
| LIBS     | ライブラリ              |
| CC       | Cコンパイラ             |
| CPP      | Cプリプロセッサ         |
| CFLAGS   | Cプリプロセッサのフラグ |
| LFLAGS   | リンカのフラグ          |
| INSTALL  | インストールプログラム  |
| SHELL    | コマンドシェル          |

#### Makefileでよく使われる擬似ターゲット名
| 変数名   | 説明                                           |
| -        | -                                              |
| all      | ターゲットを全てビルドする                     |
| build    | ターゲットを全てビルドする                     |
| doc      | プロジェクトのドキュメントをビルドする         |
| depend   | 依存関係情報を生成する                         |
| test     | ビルド後の回帰テストを実行する                 |
| install  | インストール手順を実行する                     |
| clean    | ビルドプロセス中に生成されたファイルを削除する |

## 参照
- Code Reading
