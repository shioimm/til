# Docker
- 参照: [Docker](https://www.docker.com/)
- 参照: [Docker入門（第一回）～Dockerとは何か、何が良いのか～](https://knowledge.sakura.ad.jp/13265/)
- 参照: [Docker入門（第二回）～Dockerセットアップ、コンテナ起動～](https://knowledge.sakura.ad.jp/13795/)
- 参照: [Docker入門（第四回）～Dockerfileについて～](https://knowledge.sakura.ad.jp/15253/)

## TL;DR
- コンテナ型の仮想環境を作成、配布、実行するためのプラットフォーム
- DockerコンテナイメージをDocker Engine上で実行 -> イメージがコンテナになる
- コンテナ化されたアプリケーションは実行環境に関わらず常に同じように実行される

### Dockerコンテナイメージ
- アプリケーションを実行するために必要な要素を含む、ソフトウェアパッケージ
  - 軽量かつスタンドアロンで実行可能
  - コード、ランタイム、システムツール、システムライブラリ、設定など

### 仮想マシンとの違い
- 仮想マシン
  - ホストマシン上でハイパーバイザを利用してゲストOSを動かし、その上でミドルウェアなどを動かす
- Docker
  - ホストマシンのカーネルを利用し、プロセスやユーザなどを隔離することによって
    別のマシンが動いているかのように動かす
  - ミドルウェアのインストールや各種環境設定はコード化して管理する(IaC)

### 利点
- コード化されたファイルを共有することで、同じ環境を容易に作ることができる
- 作成した環境を容易に配布できる
- 作成した環境を容易にスクラップ＆ビルドできる

## ライフサイクル
1. Docker HUBからDockerコンテナイメージを取得
    - Dockerイメージは公開されているものだけでなく自ら作成することも可能
       -> Dockerfileを作成・使用して必要なDockerイメージを作成する
    - DockerfileにはベースとするDockerイメージに対し実行する内容を記述する
2. DockerコンテナイメージをDocker Engine上で実行
3. Dockerコンテナが起動
4. - 略 -
5. Dockerコンテナを削除
6. Dockerイメージを削除

## ツール
### Docker HUB
- [コンテナイメージ共有リポジトリ](https://www.docker.com/products/docker-hub)
  - パブリックリポジトリ
  - プライベートリポジトリ

### Docker Desktop
- コンテナ化アプリケーションの構築と共有を行うためのデスクトップアプリケーション

## コマンド
- `$ docker-compose up` -> docker-compose.ymlに基づき環境を立ち上げる
  - `-d`オプションでデーモン化
- `$ docker-compose down` -> 立ち上げた環境を(DBに保存されたデータごと)捨てる
  - version: 2以降ではvolumesを指定することで保存されたデータを復元
