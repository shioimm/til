# EC2
- 参照: [Amazon EC2](https://aws.amazon.com/jp/ec2/?nc2=h_ql_prod_fs_ec2)
- 参照: AWSをはじめよう　～AWSによる環境構築を1から10まで～

## TL;DR
- クラウド内でのコンピューティングサービス
  - クラウド内の仮想サーバーとして使用されるケースが多い
  - 商業サービスのインフラとして広く採用されている

### 特徴
- インスタンス単位での管理
  - インスタンス -> 仮想コンピューティング環境
  - インスタンスのコピーや破棄を容易に行うことができる
  - サーバーのスケール・冗長化を容易に行うことができる
  - インスタンスのIPアドレスは動的に決定される(起動のたびに異なる)
    - 静的なIPアドレスを使用する場合はElasticIPを使用する
- 世界主要都市にデータセンターを持ち、選択が可能
- サーバー構築に関わる時間の短縮を行うことができる

## インスタンスタイプ
- 参照: [【AWS】 EC2のインスタンスタイプを解説します。](https://www.acrovision.jp/service/aws/?p=1712)
- CPU、メモリ、ストレージ、ネットワークキャパシティーの組み合わせによって構成され、
  ユースケース別に選択することができる

```
インスタンスファミリー + インスタンス世代 + インスタンスサイズ
```

#### インスタンスファミリー
- T - 汎用
- M - コンピューティング最適化
- C - CPU重視
- R - メモリ重視
- その他

#### インスタンス世代
- 数字が大きい方が世代が新しい

#### インスタンスサイズ
- CPU、メモリ、ネットワークのキャパシティ
- 一段大きくなると、vCPUとメモリサイズが倍になる
  - nano/micro/small/medium/large/xlarge/2xlarge/4xlarge

## Get Started
1. AMIの選択
    - Amazon Machine Image - コンピューティング環境のテンプレート(OS)
2. インスタンスタイプの選択
3. インスタンスの詳細の設定
4. ストレージの追加
    - EBSのボリュームの種類・サイズ
    - EBS - EC2で使用する外部ストレージである
5. タグの追加
    - インスタンスを分類するために使用する
6. セキュリティグループの設定
    - セキュリティグループ - ファイアウォールの設定
7. 確認
8. キーペアのダウンロード
    - キーペア - サーバーに入るための鍵-鍵穴
9. 作成したインスタンスに名前をつける

## EC2 Auto Scaling
### TL;DR
- EC２の負荷の増減に合わせてキャパシティを自動的にスケーリングする
- CloudWacthでターゲット超過を検知し、ELBに対してスケールアウト/スケールインを指示する

### Get Started
1. EC2ダッシュボード
  -> AUTO SCALING/起動設定
  -> 起動設定の作成
2. AMIの選択
3. インスタンスタイプの作成
4. 詳細設定
5. ストレージの追加
6. セキュリティグループの設定
7. 確認 -> 作成
    - 既存のキーペアを選択
8. 起動設定を使用してAuto Scalingグループを作成
9. Auto Scalingグループの詳細設定
10. スケーリングポリシーの設定
11. 通知の設定 -> 通知の追加
12. タグを設定
13. 確認 -> 作成

### SSHログイン時に自作のキーペアを使用する
1. ホストで公開鍵秘密鍵のペアを作成
2. EC2上で`.ssh/xxx`ファイルを生成
    - `.ssh/`の権限を制御
3. `.ssh/xxx`にホストで作成した公開鍵をペースト
    - `.ssh/xxx`の権限を制御
