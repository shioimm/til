# 非同期処理
1. メインスレッドは非同期APIを呼び出す (呼び出し後、結果を得る前にメインスレッドに制御が戻る)
2. 非同期操作が完了する -> イベントキューにタスクがpushされる
    - 各スレッドは独自のキューを持つ
    - キューは非同期操作の結果をメインスレッドに送り返すために使用される
    - タスクは呼び出しに関するメタ情報とメインスレッドから与えられたコールバック関数への参照を含む
3. メインスレッドのコールスタックが空になった後、イベントキューが走査される
4. イベントキューに保留中のタスクが存在している場合は実行される
5. タスクの実行により関数の呼び出しがトリガーされる
6. メインスレッド関数に制御が戻る
7. 関数呼び出しの結果であるコールスタックが空になった後、再びイベントキューが走査される
8. コールスタックとイベントキューの両方が空になるまで & すべての非同期API呼び出しが完了するまで繰り返し

#### コールスタック
- 実行する関数の呼び出し順序を表すスタック
- コールスタックに蓄積された関数は順番に実行される

#### イベントキュー
- ユーザーからのイベントや、ブラウザからのイベントなどを一時的に蓄えておく領域
- イベントキューに蓄積されたタスクは、コールスタックが空になったタイミングでひとつずつコールスタックにpushされる

#### コールバック関数
- ある関数が条件を満たした時にイベントキューにenqされる

#### イベントループ
- コールスタックを監視する無限ループ
- 関数呼び出しのスタックとイベントキューがenqしたイベントを処理する

## 参照
- [非同期処理:コールバック/Promise/Async Function](https://jsprimer.net/basic/async/)
- [シングルプロセス・シングルスレッドとコールバック](https://typescriptbook.jp/reference/single-process-and-callback)
- プログラミングTypeScript
