# Elastic Load Balancing
- 複数のターゲットに渡る着信トラフィックを分配するロードバランサ
  - ALB (Application Load Balancer) - リクエストレベル(HTTP / HTTPS)
  - NLB (Network Load Balancer) - 接続レベル(TCP / UDP)
  - CLB (Classic Load Balancer)
- 冗長化やパフォーマンスの調整を行う
- スペックやノード数の指定はなく、リクエストの量やELBの負荷などによって自動的に調整される
- アクティブレベルチェックによる疎通確認と切り離しが可能

#### ターゲットグループ
- ALBからのアクセスを受け付ける先を設定するための機構
- 受付先のヘルスチェックも行う

#### リスナー
- ALBへの接続に対し、どのような通信 (プロトコル・ポート番号) をターゲットグループへ転送するかを指定するための機構

## 利用方法
1. 種類・利用するVPC・ゾーン・アタッチするセキュリティグループを指定する
2. AWSがそれぞれ指定されたゾーンにELBのノードを起動する
3. ELBの作成時に発行された接続先のエンドポイント (ドメイン名・ポート番号) を、
   本来利用したいドメインのCNAMEレコードとしてDNSに設定する

## Get Started
1. EC2ダッシュボード
  -> ロードバランサー
  -> ロードバランサーの作成 (-> 種類の選択)
2. ロードバランサーの設定
    - 全てのAZにチェック
3. セキュリティ設定の構成 -> セキュリティグループの設定
4. ルーティングの設定
    - ターゲットグループ - ロードバランサーの分散先となるサーバーのグループ
5. ターゲットの登録
    - インスタンスの選択 -> 登録済みに追加
6. 確認
7. ヘルスチェック
    - EC2ダッシュボード
    -> ターゲットグループ
    -> ターゲット
    -> ステータス
8. Route53でElasticIPを直接指定している箇所を修正
    - Alias - Alias Targetにロードバランサーを指定

## 参照
- [Elastic Load Balancing](https://aws.amazon.com/jp/elasticloadbalancing/)
- AWSをはじめよう　～AWSによる環境構築を1から10まで～
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 9.3
- AWSの知識地図〜現場必修の基礎から構築・セキュリティまで 2.3
