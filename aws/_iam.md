# AWS IAM (Identity Access Management)
- 「あるAWSリソースが他のAWSリソースに対してどのような権限をもっているか」を規定するもの
  - AWSリソースが他のAWSリソースを操作する際の権限管理
  - ユーザーアクセスと暗号化キーの管理 (AWSにおけるアカウントは特定個人単位ではなく取引単位で管理される)
- IAMユーザーまたはIAMロールを使うことでAWSリソースにアクセス可能

#### プリンシパル
- AWSリソースにアクセスするユーザーやアプリケーション
- プリンシパルはルートユーザー、IAMユーザー、IAMロールで認証を行なってAWSリソースを操作する

#### アクセスキー
- アクセスキーID + シークレットキーを含む文字鉄の組み合わせ
- ルートユーザー、IAMユーザーによって生成され、アプリケーションなどに認証情報として埋め込むことで
  スクリプトやアプリケーションがCLI、SDKを使用してAWSリソースとして操作可能になる
- IAMユーザーが実際に操作できる内容はIAMユーザーに紐付けられたIAMポリシーに依存する

#### IAMポリシー
- AWSリソースへのアクセスの権限を制御する機能
- IAMユーザー、IAMロール、IAMグループ (IAMユーザーの集合) に対して
  IAMポリシーをアタッチすることでアクセス制御を行う

#### アカウントルートユーザー
- rootユーザー
- ルートユーザーによる操作はリスクが高い
- アクセスキーは削除する

#### IAMユーザー
- アカウントルートユーザーによって作成される個々のユーザー
- AWSリソースの操作はIAMユーザーによって行う

#### IAMグループ
- IAMユーザーのグループ
- IAMユーザーは複数のグループに所属可能
- IAMユーザーにはIAMユーザーにアタッチされたIAMポリシーと
  IAMグループにアタッチされたIAMポリシーの権限が付与される

#### IAMロール
- AWSリソースに対して付与される他のAWSリソースに対する権限
- 各AWSリソースに対して1つ割り当てが可能

#### STS (Amazon Security Token Service)
- AWSリソースやIAMユーザーを持っていないユーザーやアプリケーションに対して
  一時的に利用できる認証情報 (IAMロールの一時的なアクセスキー) を付与する機能

## 認証方法
- マネジメントコンソール (ユーザーID/PW)
- AWS CLI (アクセスキーID/シークレットアクセスキー)

## アクセスフロー
1. AWSリソースへアクセスするプリンシパルがIAMユーザーやIAMロールを利用して認証を行う
2. 認証が通るとIAMユーザーまたはIAMロールを使ってAWSリソースにリクエストを送る
3. リクエストはIAMユーザーやIAMロールにアタッチされたIAMポリシーに基づき、
   リソースの操作権限の有無を評価される (権限がない場合はリソースの操作に失敗)

## 参照
- [AWSome Day](https://aws.amazon.com/jp/about-aws/events/awsomeday/)
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 9.3
- [13. Hands-on #6: Bashoutter](https://tomomano.github.io/learn-aws-by-coding/#sec_bashoutter)
- AWSの基本・仕組み・重要用語が全部わかる教科書 09-01
