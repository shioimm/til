# EC2
- AWS上で起動させる仮想サーバー (インスタンス)
  - インスタンスのコピーや破棄を容易に行うことができる
  - インスタンスのIPアドレスは動的に決定される(起動のたびに異なる)
    - 静的なIPアドレスを使用する場合はElasticIPを使用する
- EC2上でインスタンスをlaunchするとAWS管理のハードウェア上にAMIが展開され、
  OSが起動し、プライベートIPアドレスが付与される
- データの永続化はサポートしておらず別途ストレージ系サービスの利用が必要

#### インスタンスの状態
- Running - 実行中
- Stopped - 停止中
- Terminated - Terminate処理を行った状態・自動的に削除される

#### インスタンスタイプ
- CPU、メモリ、ストレージ、ネットワークキャパシティーの組み合わせ

```
t3.micro

# インスタンスファミリー + 世代 + インスタンスサイズ
```

- インスタンスファミリー - 用途
- インスタンス世代 - 数字が大きい方が世代が新しい
- インスタンスサイズ - CPU、メモリ、ネットワークのキャパシティ (一段大きくなるとCPUとメモリサイズが倍になる)

## AMI (Amazon Machine Image)
- OSやミドルウェア・アプリケーションを含めたテンプレート
- ベースとなるAMIが用意されている他、各種プログラムがインストール済みのAMIも定義することもできる

```
# AMIのリストを取得
$ aws ec2 describe-images --owners amazon --profile プロファイル名 --region リージョン
```

## EBS (Amazon Elastic Block Store)
- EC2においてOSやソフトウェアを保存するためのストレージ
  - インスタンスストア - インスタンスに直接データを保存し、インスタンスの消滅に伴いデータもなくなる
- EC2とは別機構であり、EC2とはネットワークを介してつながっている
- データはAZ内で複数のハード ウェアにレプリケーションされている
- ボリュームタイプ - ストレージの種類 (SSD、HDD)
- EC2とは別料金 (保存したデータ(GB 単位) / 月 + α)

## セキュリティグループ
- EC2インスタンスにおけるFW
- セキュリティグループルールによって許可する通信をプロトコルとポート番号に基づいて制御する

## AWS Systems Manager
- SSH鍵ではなくIAM認証を利用してEC2 インスタンスへの接続を行うための仕組み

## 参照
- [Amazon EC2](https://aws.amazon.com/jp/ec2/?nc2=h_ql_prod_fs_ec2)
- AWSをはじめよう　～AWSによる環境構築を1から10まで～
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 9.3
- [4. Hands-on #1: 初めてのEC2インスタンスを起動する](https://tomomano.github.io/learn-aws-by-coding/#sec_first_ec2)
- [6. Hands-on #2: AWS でディープラーニングを実践](https://tomomano.github.io/learn-aws-by-coding/#sec_jupyter_and_deep_learning)
- AWSの知識地図〜現場必修の基礎から構築・セキュリティまで 2.3
