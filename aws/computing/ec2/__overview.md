# EC2
- AWS上でソフトウェアの実行基盤として利用される仮想サーバー
- EC2はAWSが管理するハードウェア上にAMIが展開し、OSを起動することによって物理的に起動される
- EC2はVPCおよびサブネットに仮想サーバー (インスタンス) を配置し、
  VPCが付与するプライベートIPアドレスを用いてリモートアクセスすることで使用される
  - ワークロードに応じて多様な種類のインスタンスを利用できる
  - インスタンスのIPアドレスは起動のたびに動的に決定される (ElasticIPを使用すると静的なIPアドレスを得られる)
- データの永続化はサポートしておらず別途ストレージ系サービスの利用が必要

#### インスタンスの状態
- Running - 実行中
- Stopped - 停止中
- Terminated - Terminate処理を行った状態・自動的に削除される

#### インスタンスタイプ
- CPU、メモリ、ストレージ、ネットワークキャパシティーの組み合わせを定義したもの

```
M5a.24xlarge

# インスタンスファミリー + 世代 (+ オプション) + インスタンスサイズ
```

- インスタンスファミリー - 用途
- インスタンス世代 - 数字が大きい方が世代が新しい
- インスタンスサイズ - CPU、メモリ、ネットワークのキャパシティ (一段大きくなるとCPUとメモリサイズが倍になる)

#### AMI (Amazon Machine Image)
- EC2上で仮想サーバーとして動作させるゲストOS
- ベースとなるAMIが用意されている他、
  ミドルウェア・アプリケーションを含め各種プログラムがインストール済みのAMIもあり、
  新たに定義することもできる

```
# AMIのリストを取得
$ aws ec2 describe-images --owners amazon --profile プロファイル名 --region リージョン
```

## 起動
- インスタンスタイプ + AMI + 購入オプションを指定することで仮想サーバーを構築できる

#### フロー
1. AMIの選択
2. インスタンスタイプの選択
3. インスタンスの詳細設定
4. ストレージ設定
5. タグ設定
6. セキュリティグループ設定
7. キーペア設定

## AWS Systems Manager
- SSH鍵ではなくIAM認証を利用してEC2 インスタンスへの接続を行うための仕組み

## 参照
- [Amazon EC2](https://aws.amazon.com/jp/ec2/?nc2=h_ql_prod_fs_ec2)
- AWSをはじめよう　～AWSによる環境構築を1から10まで～
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 9.3
- [4. Hands-on #1: 初めてのEC2インスタンスを起動する](https://tomomano.github.io/learn-aws-by-coding/#sec_first_ec2)
- [6. Hands-on #2: AWS でディープラーニングを実践](https://tomomano.github.io/learn-aws-by-coding/#sec_jupyter_and_deep_learning)
- AWSの知識地図〜現場必修の基礎から構築・セキュリティまで 2.3
- AWSの基本・仕組み・重要用語が全部わかる教科書 04-01
