# マスタリングTCP/IP 入門編 まとめ05
- 井上直也・村山公保・竹下隆史・荒井透・苅田幸雄 共著

## IPに関連する技術
### DNS(名前解決)
- ドメイン名からIPアドレスを取得する仕組み
- ドメイン名は階層構造になっている <-> DNSは階層構造になっている
```
kusa.ac.jp

-> jpドメイン配下のacドメイン配下のkusaドメイン
```
- ネームサーバー -> ドメイン名を管理しているホスト・ソフトウェア
- リゾルバ -> 名前解決の問い合わせを行うホスト・ソフトウェア

### ARP(アドレス解決)
- 宛先IPアドレスから近隣の送信先MACアドレスを取得する仕組み

#### RARP
- 自身のMACアドレスから自身のIPアドレスを取得する仕組み

#### Gratuitous ARP
- 自身のIPアドレスから自身のMACアドレスを取得する仕組み

### ICMP
- ICMPパケット
  - IPパケットが目的地まで届くかを確認する
  - IPパケットが破棄された際にその原因を通知する
  - 不十分な設定を修正する
- 主なICMPメッセージ
  - ICMP到達不能メッセージ
  - ICMPリダイレクトメッセージ
  - ICMP時間超過メッセージ
  - ICMPエコーメッセージ
    - ICMP拡張エコーメッセージ
  - ICMPルーター探索メッセージ

#### ICMPv6
- ICMPv6メッセージ
  - エラーメッセージ
  - 機能メッセージ
- IPv6はMACアドレスの探索のためICMPの近隣探索メッセージを使用する
  - 近隣要請メッセージ
  - 近隣告知メッセージ

### DHCP
- DHCPサーバーがIPアドレスを一括管理することによって、
DHCPクライアントがネットワークに接続するとTCP/IPでの通信に必要な設定が自動的に行われる仕組み
- 移動端末でのIPアドレスの設定に使用される

#### DHCPリレーエージェント
- DHCPサーバーがDHCPクライアントと同一リンク内にない場合でもDHCP要求を受け付ける仕組み
- 各セグメントにリレーエージェントを設置し、セグメント内のDHCPクライアントがDHCP要求パケットをブロードキャストした際に
リレーエージェントがDHCPサーバーに対して要求をマルチキャストする

### NAT
- ローカルなネットワークでプライベートIPアドレスを使用し、インターネットに接続する際にグローバルIPアドレスを使用する仕組み
- 主にIPv4アドレスの節約のために使用される
- CGN -> ISPレベルでNATを行う
  - ネットワークごとのNATとISPのCGN装置で二段階のNATを行う

### IPトンネリング
- 通信を行うネットワークの中で互換性のないプロトコルを使用していた場合(ex. IPv4 - IPv6 - IPv4)に通信をサポートする仕組み
- トンネルするパケット(元のパケット)に必要なIPヘッダを追加で付加する
  - ex. IPv4パケットがIPv6ネットワークを通過する際にIPv6ヘッダを付加する

### その他
- VRRP -> バックアップルーターによるデフォルトルーターの冗長化
- IPマルチキャスト関連技術 -> 受信者のいないネットワークに対してマルチキャストフレームを送信しないようにする
- IPエニーキャスト -> 複数地域に存在し同じサービスを提供するサーバーに同じIPアドレスを付与する
- 通信品質の制御 -> IntServ / DiffServ
- 明示的な輻輳通知
- Mobile IP -> 物理的な場所を移動してもIPアドレスが変わらないようにする
  - Mobile IPv6
