# Webを支える技術 まとめ02
- 山本陽平 著

## 02 URI
### 概要
```
https://coe:pass@blog.example.com:8000/search?q=test&debug=true#n10

- https -> スキーム
- coe -> ユーザ名
- pass -> パスワード
- blog.example.com -> ドメイン名
- 8000 -> ポート
- /search -> パス
- q=test&debug=true -> クエリパラメータ
- #n10 -> URIフラグメント
```

#### 実装上の注意点
- 相対URIの解決
- %エンコーディングの扱い(UTF-8を使う)

#### その他のポイント
- ベースURI -> 相対URIの起点となるURL
  - `<head>`要素の中で`<base>`要素として指定できる
``html`
<head>
  <base href='https://example.com'>
```
- URIにはASCII文字を使用でき、それ以外の文字は%エンコーディングされる
- URIには仕様上の長さ制限はないが、ブラウザの実装上の制限に合わせて実装される
- URIスキームはIANAにて一覧公開されており、新たなプロトコルができた場合以外に追加されるケースは少ない

### 設計
- URIは原則変更しない
  - どうしても変更が必要な場合は新しいURIへリダイレクトさせる
```
// 良いURI
- プログラミング言語依存の拡張子、メソッドを使用しない
- 実装依存のパス名を利用しない
- セッションIDを含めない
- そのリソースを表現する名前になっている
```

#### その他のポイント
- コンテントネゴシエーションの代わりに拡張子を使用する場合がある
  - コンテントネゴシエーションの場合、同じユーザーが言語を切り替えるのにブラウザの言語設定が必要なため
- マトリクスURI
  - 階層構造が不適切な場合、複数のパラメータを`;`か`,`で区切ってリソースを表現する
- URIの不透明性
  - URIはクライアント側で組み立てたり推測できない
