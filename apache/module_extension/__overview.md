# 拡張モジュール
## 拡張モジュールの追加手順
1. 拡張モジュールのプログラム (C言語) を作成 (`mod_***`)
    - `httpd.h`からApache Portable Runtime (APR) をinclude
2. apxsコマンドでモジュール`mod_***.so`をビルド
    - apxs - Apache拡張モジュールを作成するためのビルド、インストールなどを行うコマンド
3. ビルドしたモジュールをインストール、設定
4. Apacheの再起動

## Apacheにおけるメモリ割り当てと解放
- Apacheはサーバー起動時、サーバー内部で使用するオブジェクトのためのメモリプール (`apr_pool_t`型) を保持する
- メモリプール内のオブジェクトはApacheが管理・解放を行う
- Apache拡張内で使うデータのための領域をメモリプールに割り当てる場合は`apr_pcalloc`関数を利用する

## 引用・参照
- Webで使えるmrubyシステムプログラミング入門 Section032
