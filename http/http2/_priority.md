# 優先度
- 各ストリームに31ビットの優先度値を与えることができる
  - 数値`0` - 最優先のストリーム
  - 数値`2 ** 31 - 1` - 優先度最低のストリーム
- 優先度が設定時、サーバーはリソース(CPU・メモリ・帯域幅)の配分を制御してストリームの処理優先度付けを行い、
  レスポンスデータが送信可能になると、優先度の高いフレームから優先的にクライアントへ送出する
  - HTTP/2は優先度付けの方法について特定のアルゴリズムを指定しておらず、
    優先度付けの戦略はクライアントやサーバーの実装に依存する

## 優先度情報
- ストリームはHEADERSフレーム内に優先度情報を持つ
  - 優先度が指定されていないストリームはデフォルトの優先度が適用される
  - 優先度はPRIORITYフレームによって後から変更できる

## 優先度計算
- 優先度はWeightとDependencyの組み合わせから計算される
- 優先度は木構造の優先順位ツリーによって表せられる
  - rootストリームはストリーム0(リソースは割り当てられない)
  - Dependency0のストリームはrootストリーム直下に配置される
  - 各ストリームに対してDependencyを持つストリーム(子)はその配下に配置される
    - 子ストリームは親ストリームの処理が終わった後に処理を開始する
      - 各ストリームは同じレイヤーの全体の重みに占める割合に応じてリソースが割り当てられる
      - 送信が終わったストリームの分、空いたリソースは同じレイヤーの他のストリームに割り当てられる

### Weight
- 1~256で指定される重み
- デフォルトは16
- サーバーがリソースを分配する割合を計算するときに使用される

### Dependency
- あるストリームが依存する別のストリームを指定する
- デフォルトは0

## `PRIORITY`フレーム
- `PRIORITY`フレームによって特定のストリームのWeightとDependencyを再設定できる
- 親ストリームのDependencyを変更すると子ストリームも一緒に移動する

### 参照
- よくわかるHTTP/2の教科書P99-107
- ハイパフォーマンスブラウザネットワーキング
