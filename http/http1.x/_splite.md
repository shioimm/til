# ファイル結合とスプライト
- HTTP/1.xにおいてリクエスト数を減らすため、複数のリソースを一つにまとめる手法
  - ファイル結合 - 複数のJavaScriptやCSSファイルを一つのリソースにまとめる
  - スプライト - 複数の画像を結合した画像
- HTTP/1.xには信頼性の高いパイプラインのサポートがないため、
  アプリケーション層でパイプラインを実行するための代替戦略

### 利点
- プロトコルオーバーヘッドの削減
- アプリケーションレイヤーパイプライン

### 欠点
- アプリケーション上の複雑さが発生する
  - 読み込み時の前処理、デプロイ時の考慮、コードの追加etc
- 複数の独立したリソースのバンドルによって
  キャッシュのパフォーマンスやページの実行速度が悪化する可能性がある

### 実際のアプリケーションで起こりうること
- 全ての同タイプのリソースは同じURLと同じキャッシュキー下で生存する
- 統合されたファイルは現在のページには必要ないリソースを含んでいる可能性がある
- どれか一つののファイルをアップデートするとキャッシュが無効化され、
  リソースのバンドルを再度ダウンロードする可能性があり、オーバーヘッドが追加で発生する
- JavaScriptとCSSはどちらも転送が完了してから構文解析を開始実行するため、
  アプリケーションの実行が遅くなる可能性がある

## ファイル結合とスプライトを利用する基準
- アプリケーションが複数の地位勇魚リソースのダウンロードによってブロックされている
- アプリケーションが特定のリクエストを結合することで利益を得ることができる
‐ キャッシュの粒度が落ちてもアプリケーションに悪い影響がない
- 統合された画像が高いメモリオーバーヘッドにつながらない
- 実行が遅くなることで最初のレンダリングまでの時間に影響を与えない

## HTTP/2対応
- HTTP/2ではファイル結合とスプライトを利用しない
  - HTTP/2では多数の小さなリソースを多重化して並列送信できるため

## 参照
- ハイパフォーマンスブラウザネットワーキング
