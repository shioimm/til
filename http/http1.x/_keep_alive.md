# Keep-Alive
- 一度確立したTCPコネクションを再利用して複数回通信を行う機能
- Keep-Aliveを使用しない場合は一つのリクエストごとに通信を閉じる
- HTTP/1.0では拡張機能
- HTTP/1.1では標準機能 (一つのサーバーに対して接続できるコネクション数は最大6つ)
- HTTP/2では常に有効であるためKeep-Aliveヘッダの使用は禁止されている

## 仕組み
1. クライアント -> サーバー
  - `Connection: Keep-Alive`を送信
2. クライアント <- サーバー
  - `Connection: Keep-Alive`を送信し返すと有効化
3. クライアント・サーバーのいずれかが`Connection: close`を送信するとKeep-Aliveでの通信を終了する

## パイプライニング
- 高速化のために通信を多重化する仕組み
- Keep-Aliveの利用を前提とする
- 仕様に入ったが広く使われることはなかった
- その後の高速化の改良の基礎となった

### 仕組み
1. クライアント -> サーバー
  - 最初のリクエストが完了する前に次のリクエストを送信する
    - レスポンスを待って次のリクエスト出すまでの待ち時間を排除する
    - ネットワークの稼働率を上げ、パフォーマンスを向上させる
2. クライアント <- サーバー
  - リクエストが来た順序でレスポンスを返す

### パイプライニングが使用できる条件
- HTTPクライアントがパイプラインをサポートしている
- HTTPサーバーがパイプラインをサポートしている
- アプリケーションは接続切断と再接続を処理できる
- アプリケーションはリクエストの切断などに関わる冪等性の問題を適切に処理できる
- アプリケーションは不安定な中間装置の挙動から自身を保護できる

## 参照
- Real World HTTP 第2版
- Linuxプログラミングインターフェース 58章 / 61章
- ハイパフォーマンスブラウザネットワーキング
