# JWT
- JSONオブジェクトに署名や暗号化を施す方法を定めたオープン標準(RFC 7519)
- JSONをベースに改ざん防止のための署名を加えたもの
  - base64エンコードされたヘッダ・ペイロード・署名をピリオドで接合した文字列
  - 当事者の一方(サーバー)または両方(サーバー・クライアント)の秘密鍵により署名されており、
    発行されたトークンが正規のものか検証が可能

## クレーム
- トークン内に任意の情報(クレーム)を保持することが可能
  - 登録クレーム、パブリッククレーム、プライベートクレームの3つのタイプがある

## 用途
- 認証
  - 認証できた事実を証明する認証トークン
- 情報交換
  - 当事者間で安全に情報を伝達する
    - 送信者の確認
    - コンテンツが改竄されていないこと

## 構造
#### ヘッダ
- トークンのタイプ(JWT)と署名生成に使用したアルゴリズムを格納

#### ペイロード
- エンティティに関するステートメントと追加データを格納
  - iss トークン発行者の識別子
  - sub トークン主題の識別子
  - aud トークンが意図している受信者の識別子
  - exp トークンの有効期限
  - nbf トークン開始日時
  - iat トークン発行日時
  - jti 発行者ごとトークンごとに一意な識別子
  - その他のパブリッククレーム
  - その他のプライベートクレーム

#### 署名
- トークン検証用の署名

## JWTの取得・利用の流れ
1. アプリケーションまたはクライアントが認可サーバーに認可を要求
2. 認証が許可されると、認可サーバーはアプリケーションまたはクライアントにアクセストークンを返す
3. アプリケーションまたはクライアントはアクセストークンの使用により、
   保護されたリソースのAPIにアクセスすることができるようになる

## BEF
- Backends For Frontends
- フロントエンドのためのバックエンドサーバー
- BEF - ブラウザ間でランダムな認証トークンを利用してBEFがJWTトークンを発行し、
  後段のサービスにJWTを送付する手法がある
  - 認証情報を含むJWTをJavaScriptから操作できる場所(CookieやlocalStorage)に直接格納すると
    クロスサイトリクエストフォージェリの危険性を増すため

## 参照・引用
- [JWT](https://jwt.io/)
- [JSON Web Token](https://ja.wikipedia.org/wiki/JSON_Web_Token)
- Real World HTTP 第2版
