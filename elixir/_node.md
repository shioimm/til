# ノード
- プログラミングElixir 第16章

## TL;DR
- ノード - 動作しているErlang VM
  - BEAM - Erlang VM
    - ホストOS上で動作するOSのような働きをする
- ノード同士はローカル環境でもリモート環境でも接続可能

## ノードの名前
- `Node.self`

### IEx上でノードの名前をつける
- `$ iex --name xxx@example.local` - 完全修飾子
- `$ iex --sname xxx` - 短い名前

## ノードの接続
```exs
Node.connect :接続先ノード名

Node.list # => [:接続先ノード名]
```

```exs
# 接続先ノードでも接続元ノードを取得できる

Node.list # => [:接続元ノード名]
```

## プロセスの生成
- `Node.spawn` - 指定のノードでプロセスを生成する

```exs
Node.spawn(:ノード名, 関数)
```

1. プロセスは`spawn`を呼び出した側のノードのプロセス階層の中に生成される
2. プロセスは`spawn`を呼び出された側のノードで実行される
3. プロセスは`spawn`を呼び出した側のノードに結果を返す

### プロセスの名前
- プロセスに名前をつける

```exs
:global.register_name(名前, PID)
```

- プロセスの名前からPIDを引く

```exs
:global.whereis_name(名前)
```

## リモートノードへの接続権限
- ノードは他のノードへ接続する際、接続先のノードに対して接続権限を確認する
  - 自身のクッキーとリモートノードのクッキーの比較によって行う
    - クッキー - 任意の文字列
      デフォルトのクッキーはホームディレクトリに生成される`.erlang.cookie`に格納される

### クッキーの名前
- `Node.get_cookie`

### IEx上で指定のクッキーを使用する
- `$ iex --sname xxx --cookie yyy`
