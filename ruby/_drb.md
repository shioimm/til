# dRuby
#### サーバープロセス
- サービスを提供するURIにオブジェクトを紐づける
- クライアントからのメソッドコールを受信し、結果を返す
  - リクエストとして受信したマーシャル文字列をロードし、DRbObjectオブジェクト・メソッド名・引数を得る
  - DRbObjectオブジェクトからレシーバを得る
  - レシーバに対してメソッドを実行する
  - メソッドの実行結果をマーシャライズしてクライアントに送信する

#### クライアントプロセス
- サーバープロセスの用意したURIを指定し、レシーバへの参照 (URI) を持つDRbObjectオブジェクトを生成
- DRbObjectオブジェクトに対してメソッドを呼び、その返り値を得る
  - レシーバへの参照を持つDRbObjectオブジェクト・メソッド名・引数をマーシャライズしてサーバーに送信する
  - レスポンスとして受信したマーシャル文字列をロードし、返り値を得る

#### DRbObjectオブジェクト
- オブジェクトへの参照情報 (`@ref`) を持つオブジェクト
- `@ref = nil`の場合は`@uri`を参照情報として扱う

#### 値渡し
- マーシャライズ可能なオブジェクトはマーシャライズされる

#### 参照渡し (参照の値渡し)
- マーシャライズ不可能なオブジェクトはDRbObjectオブジェクトでラップした上でマーシャライズされる

```ruby
# サーバーとして実行中のプロセスではDRbObject.newでオブジェクトへの参照を持つDRbObjectを作成できる

DRbObject.new(obj)
=> #<DRb::DRbObject:0x00000001060a0be8 @ref=<object_id>, @uri="druby://localhost:<port>">
```

#### DRbUndumpedモジュール
- すべてのオブジェクトをマーシャライズ不可能 (参照の値渡し) にするためのモジュール

#### DRbUnknownクラス
- サーバー・クライアント間で共有されたオブジェクトの属するクラスが
  サーバー・クライアントのいずれかに定義されていない場合 (uninitialized constant) 、
  クラス定義されていない側で便宜的に利用するクラス
  - クラス定義されていない側でマーシャル文字列のロードを行おうとすると失敗する
  - DRbUnknownオブジェクトは`@buf` (ロードに失敗したバッファ) 、`@name` (未定義のクラス名) を格納する

## 参照
- dRubyによる分散・Webプログラミング
