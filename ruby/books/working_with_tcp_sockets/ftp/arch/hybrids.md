- 引用: Working with TCP Sockets (Jesse Storimer)

## Hybrids
- ネットワークアーキテクチャパターンの一つ以上を利用したハイブリッドパターン

### nginx
- C言語で書かれた高性能なネットワークサーバー
- アプリケーションサーバーの前段のHTTPプロキシとしてよく使わる
- コアではPreforkingパターン、各forkされたプロセスの内部にはEventedパターンを使用する
  - nginxが子プロセスをforkする際に全てのspawning costが支払われる
    これにより、nginxは複数のコアとサーバーリソースを最大限に活用できる
  - Eventedパターンは何もspawnせずスレッドを使用しない
    カーネルがアクティブなスレッドを管理するためのオーバーヘッドが発生しない

### Puma
- 同時実行のために構築されたRuby webサーバー
- スレッドに大きく依存する
  - GIL(Rubinius, JRuby)のないRuby実装のためのGo-to HTTPサーバーとして設計
- スレッドプールアーキテクチャを使用
  - メインスレッドは常に新しいクライアント接続を受け入れ、
    その接続をスレッドプールにキューアップして処理する

#### Keep-Aliveを使用する場合
- クライアント接続を処理した後、最初のリクエストがKeep-Aliveを要求した場合、クライアント接続は閉じられない
- Keep-Aliveしていた接続に対してリクエストを監視し、処理するためにEventedパターンが使用されている
- Keep-Aliveしていた接続から新しいリクエストが来たとき、そのリクエストを再びスレッドプールにキューアップして処理する

### EventMachine
- イベント駆動型のI/Oライブラリ
- コアはC言語で書かれており、C言語拡張としてRubyインターフェイスを提供する
- コアはEventedパターンによって実装されている
- スレッドプールも提供しており、Reactorの速度を低下させるような操作を延期するために使用されている
