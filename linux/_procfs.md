# procfs
- 参照: [procfs](https://ja.wikipedia.org/wiki/Procfs)
- 参照: Webで使えるmrubyシステムプログラミング入門 Section013

## TL;DR
- Process Filesystem
- プロセスに関するカーネル内の情報をファイルやディレクトリとして公開する擬似ファイルシステム
  - `/proc`以下のファイルはテキストファイル
  - 通常のテキストファイルと同じようにオープンクローズ・読み込みできる(書き込みには権限が必要)
  - 各プロセスの情報はカーネル内部で`task_struct`構造体に格納され、
    通常ユーザーランドからはアクセスできない
  - プロセスの情報へのアクセスを必要とする各システムコールは、
    `procfs`を介することでユーザーランドから安全にプロセスの情報へアクセスしている
- `procfs`は`/proc`ディレクトリの下にマウントされる
  - 各プロセスの情報は/proc/PIDディレクトリに格納される

## 構造
- `/proc/PID/cmdline`
  - プロセスを起動したコマンドとその引数の情報
- `/proc/PID/comm`
  - プロセスに紐づけられたプログラム名
- `/proc/PID/exe`
  - 実行中のバイナリへのシンボリックリンク
- `/proc/PID/cwd`
  - プロセスのカレントディレクトリへのシンボリックリンク
- `/proc/PID/environ`
  - プロセスの設定している環境変数
- `/proc/PID/status`
  - プロセスに関する様々な情報
    - umask値 / プロセスのステート / PID・PPID / UID・GID
      / 仮想メモリ / 実メモリ / スワップ利用状況 / 生成されているスレッド数etc
- `/proc/PID/stat`
  - プロセスに関する様々な情報
    - プログラムに読み取らせるための値の形式で格納されている
- `/proc/PID/fd`
  - 開いているファイルディスクリプタに対応したシンボリックリンク群
- `/proc/PID/fdinfo`
  - 開いているファイルディスクリプタの状態
- `/proc/loadavg`
  - システム全体の負荷
    - = 単位時間あたりの実行中プロセス数またはディスクI/O待ちのプロセス数
  - 左から過去1分間の負荷、過去5分間の負荷、過去15分間の負荷
