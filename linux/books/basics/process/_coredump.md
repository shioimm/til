# コアダンプ
- 参照: Linuxプログラミングインターフェース 22章

## TL;DR
- 終了時のプロセスのメモリイメージを保存するコアダンプファイル(`core`)を生成すること
- 保存したメモリイメージをデバッガで調べることで
  プログラムが実行していたコードやデータの状態がわかる
- プロセスをコアダンプ後終了させるシグナルがある
- `$ man 5 core`

## コアダンプしないケース
- プロセスがコアダンプする権限を持っていない
- 同名のファイルがすでに存在しており、書き込み可能だがリンクカウントが2以上ある
- コアダンプファイルを作成するディレクトリが存在しない
- プロセスのリソース消費制限としてコアダンプファイルのサイズ上限が0に設定されている
- 実行ファイルに読み取り許可が設定されていない
- カレントワーキングディレクトリが存在するファイルシステムが読み取り専用
- set-user-IDされたプログラムをファイルオーナー以外が実行した

## コアダンプの可否を設定
- `/proc/PID/coredump_filter`
  - メモリマッピングの種類別にコアダンプの可否をプロセス単位で設定可能
    - 非共有無名マッピング(デフォルトでダンプ)
    - 非共有ファイルマッピング(デフォルトでダンプ)
    - 共有無名マッピング
    - 共有ファイルマッピング

## コアダンプファイル名の設定
- `/proc/sys/kernel/core_pattern`
  - 特権ユーザーにてコアダンプファイル名の設定可能
