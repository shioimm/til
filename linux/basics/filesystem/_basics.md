# ファイルシステム
- 参照: 例解UNIX/Linuxプログラミング教室P225-269 / P375-432
- 参照: 詳解UNIXプログラミング第3版 4. ファイルとディレクトリ
- 参照: Linuxネットワークプログラミング Chapter10 TCPサーバプログラミング 10-4
- 参照: [試して理解]Linuxのしくみ 第7章 ファイルシステム
- 参照: Linuxプログラミングインターフェース 14章

## TL;DR
- カーネルが提供しているファイル操作の仕組み
  - データの格納・ファイルの名前付け・ファイルの属性の保持・ファイルの整理などの機能
- ハードディスクの中に作られたファイル、ディレクトリの集合体
  - ファイル、ディレクトリ、属性情報
- ファイル抽象
  - Unixのファイルシステムにおいては多くの対象をファイルとしてみな
  - ファイルは抽象化された共通の操作方法を持つ

## ファイルシステムが扱うファイルの種類
- ファイル - バイト列を格納するファイル
- ディレクトリ - ファイルシステムの構造を作るファイル
- 文字型特殊ファイル(端末など) - 1バイトごとに入出力する装置を表すファイル
- ブロック型特殊ファイル(ディスクなど) - 512バイトごとに入出力する装置を表すファイル
- シンボリックリンク - ファイルを別の名前で参照するためのファイル
- FIFO(名前付きパイプ) - プロセス間通信を行うためのファイル
- ソケット - プロセス間通信を行うためのファイル

## ルートディレクトリの変更
- `chroot(2)`
  - そのプロセスとそこから派生する子プロセス群に対するルートディレクトリを仮想敵に変更する
    - 仮想環境の構築
    - ファイルシステムにおいてアクセスできる範囲を制限
  - root権限を持っているユーザーのみ抜けることができる

## 名前の変更
- `rename(2)` / `renameat(2)`
  - 変更後の名前が既存である場合、削除するためにアクセス許可が必要

## デバイスファイルのファイルシステム
- デバイスファイル(キャラクタデバイス / ブロックデバイス)のうち、ブロックデバイスは
  ファイルシステムを作成・マウントすることによってファイルシステム経由で使用する
  - Ex. HDD、SSD

## ネットワークファイルシステム
- `nfs` - ネットワークを介して繋がったリモートホスト上のファイルシステム

## 仮想ファイルシステム
- `procfs`
  - システムに存在するプロセスについての情報を格納する仮想的なファイルシステム
  - `/proc`以下にマウントされる
  - `/proc/PID`以下に各プロセスの情報を格納する
- `sysfs`
  - カーネルのプロセスに関するもの以外の雑多な情報を格納する仮想的なファイルシステム
  - Ex. システムに搭載されているデバイスに関する情報、各種ファイルシステムに関する情報
- `cgroupfs`
  - 一つあるいは複数個のプロセスからなるグループにリソース使用量の制限をかける
    `cgroup`を管理する仮想的なファイルシステム
    - `cgroup`で制限をかけられるリソース: Ex. CPU、メモリ
