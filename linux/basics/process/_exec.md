# プログラムの実行
- 参照: 例解UNIX/Linuxプログラミング教室P185-224
- 参照: 詳解UNIXプログラミング第3版 7. プロセスの環境 / 8. プロセスの制御 / 9. プロセスの関係
- 参照: Linuxプログラミングインターフェース 2章 / 6章 / 27章

## `execve(2)`の動作
- プロセスのメモリ空間へ新たなプログラムをロードする
- それまで実行されていたプログラムは破棄される
　プロセスのスタック・データ・ヒープの各セグメントは
  新しいプログラム用に置き換えられる
  - `execve(2)`呼び出し時点で標準入出力ライブラリのバッファに残っているデータは
    呼び出しが成功すると捨てられる
- Cライブラリランタイムスタートアップコード、プログラムの初期化コード実行後、
  新しいプログラムの`main`関数へ制御を移す

## `exec`関数群
- いずれも`内部でexecve(2)`を実行する
  - `execl(3)`
  - `execle(3)`
  - `execlp(3)`
  - `execv(3)`
  - `execvp(3)`
  - `fexecve(3)` - ファイルディスクリプタを使用する

### `exec`関数群の接尾辞
- `l` - 引数がリスト
- `v` - 引数がベクタ
- `e` - 環境文字列へのポインタの配列へのポインタを指定
- `p` - 環境変数`PATH`を参照して実行可能ファイルを探す

#### `exec`関数群の関係
- `execv` -> `arg`を作成 -> `execve`
- `execl` -> `arg`を作成 -> `execv` -> `execve`
- `execvp` -> `arg`を作成 -> `execv` -> `environ`を使う -> `execve`
- `execlp` -> `arg`を作成 -> `execvp` -> PATH接頭辞を試す -> `execv` -> `environ`を使う -> `execve`
- `execle` -> `environ`を使う -> `execve`
- `fexecve` -> パス名を作成 -> `execve`

### `spawn(2)`
- `fork(2)` + `exec()`
- ワンショットでのプロセス作成 -> 実行

### プロセスが`exec`の前後で引き継ぐ情報
- PID / PPID
- ユーザーID / グループID
- 環境
- umask値
- シグナルマスク・シグナルハンドラの設定
- ファイルディスクリプタ
  - オープンしてあるディレクトリストリームは`exec`後にクローズ
- 作業ディレクトリ
- シグナルマスク
- リソースリミット
- 制御端末
- そのプロセスがそれまでに利用した資源の情報
