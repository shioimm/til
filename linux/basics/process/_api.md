# API
- 参照: 例解UNIX/Linuxプログラミング教室P185-224
- 参照: 詳解UNIXプログラミング第3版 7. プロセスの環境 / 8. プロセスの制御 / 9. プロセスの関係
- 参照: Linuxプログラミングインターフェース 6章

## プロセスIDの取得
### `getpid(2)`
- プロセスIDの取得

#### 返り値
- プロセスID(`pid_t`)を返す

### `getppid(2)`
- プロセスの親プロセスIDの取得

#### 返り値
- プロセスID(`pid_t`)を返す

## ユーザーIDの取得
### `getuid(2)`
- 実ユーザーIDの取得

### `geteuid(2)`
- 実効ユーザーIDの取得

## グループIDの取得
### `getgid(2)`
- 実グループIDの取得

### `getegid(2)`
- 実効グループIDの取得

## 環境リスト
### `export(1)`
- 環境の追加

```
$ export XXX=yyy

# 一回のコマンド実行commandに対してのみ環境変数を変更する場合
$ XXX=yyy command
```

### `printenv(1)`
- 現在の環境リストを出力

### `getenv(3)`
- プロセスから個別の環境を参照する

#### 引数
- `*name`を指定する
  - `*name` - 環境変数

#### 返り値
- 環境の値の文字列へのポインタ
  - 存在しない場合はNULL

### `putenv(3)`
- プロセス自身の環境リストへ新しい環境を追加する

#### 引数
- `*string`を指定する
  - `*string` - `NAME=value`形式の環境

#### 返り値
- 数値0
  - エラー時は数値0以外

### `setenv(3)`
- プロセス自身の環境リストへ新しい環境を追加する

#### 引数
- `*name`、`*value`、`overwrite`を指定する
  - `*name` - 環境変数(`=`を加えない)
  - `*value` - 環境の値
  - `overwrite` - 0が設定されている場合、上書きしない

#### 返り値
- 数値0
  - エラー時は数値-1

### `unsetenv(3)`
- プロセス自身の環境リストから環境を削除する

#### 引数
- `*name`を指定する
  - `*name` - 環境変数(`=`を加えない)

#### 返り値
- 数値0
  - エラー時は数値-1

### `clearenv(3)`
- プロセスの環境リストをリセットする
  - `clearenv(3)`を実行してもメモリ領域は解放されない

## 非局所脱出
### `setjmp(3)`
- 呼び出し位置を`longjamp(3)`のジャンプ先として登録

#### 引数
- `env`を指定する
  - `env` - プログラムカウンタレジスタとスタックポインタレジスタ
    - プログラムカウンタレジスタ - 現在実行中の機械語命令
    - スタックポインタレジスタ - スタックトップ
    - `env`に格納した値は`longjmp(3)`した時点で破棄される

#### 返り値
- 数値0
  - エラー時は数値0以外

### `longjmp(3)`
- `setjmp(3)`の呼び出し位置へジャンプする
  - `setjmp(3)`で`env`に退避したレジスタのデータをレジスタに回復する
  - ジャンプした後は`setjmp(3)`から返ってきたように処理が継続する

#### 引数
- `env`、`val`を指定する
  - `env` - プログラムカウンタレジスタとスタックポインタレジスタ
