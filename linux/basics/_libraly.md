# オブジェクトライブラリ
- 参照: Linuxプログラミングインターフェース 2章

## TL;DR
- アプリケーションプログラムからコール可能な関数のコンパイル済みオブジェクトコードを持つファイル
  - 関係のある複数の関数が一つのオブジェクトライブラリとしてまとめられることが多い
- オブジェクトライブラリにはスタティックライブラリと共有ライブラリの二種類がある

## スタティックライブラリ(アーカイブ)
- ある形式に従いコンパイルされたオブジェクトモジュールの集合
- プログラムリンク時にライブラリとして指定することでスタティックライブラリ内の関数を使用できる
- リンカはメインプログラムからスタティックライブラリ内の関数への参照を解決し、
  ライブラリ内のモジュールから対象のオブジェクトをコピーし、
  生成する実行ファイルへ追加する
- ライブラリ内の使用しない関数も含めてリンクするためファイルサイズ・メモリサイズが大きくなる
- ライブラリ内の関数を変更した場合、スタティックライブラリの作成後に再リンクが必要

## 共有ライブラリ
- リンカはライブラリ内のオブジェクトモジュールを実行ファイルへコピーせず、
  実行時に共有ファイルが必要であるということだけを実行ファイルに記録する
- プログラムを実行し、実行ファイルがメモリにロードされると
  ダイナミックリンカが必要なライブラリを特定し、
  メモリへロードし、共有ライブラリ内の必要な関数を解決しリンクする
- 実行時に共有ライブラリは一つしか存在せず、全てのプログラムが同じコードを使用する
- ライブラリ内の使用する関数を動的に決定するためファイルサイズ・メモリサイズを節約できる
- ライブラリ内の関数を変更した場合、再ビルドのみで次回実行時から最新バージョンを使用できる

### 共有ライブラリのメリット
- 参照: 詳解UNIXプログラミング第3版 7. プロセスの環境
- 使用メモリサイズの低減
  - メモリ上のどこかに、全てのプロセスが参照するライブラリルーチンの単一のコピーを管理する
  - 各実行ファイルから共有ライブラリを参照することによって、各実行ファイルのサイズを低減させる
  - ただし実行時のオーバーヘッドは増える
- ライブラリの動的な共有
  - ライブラリを使う各プログラムをリンクし直さずにライブラリ関数を新しいものに置き換えることができる
