# タスクスケジューリング
- 参照: Linuxによる並行プログラミング入門 第10章 タスクスケジューリング 10.1

## TL;DR
- タスクをどのような順序で実行するか決定すること
- 優先度・スケジューリングポリシーによって決定される
  - 優先度 - 数値
    - プロセススケジューリングではnice値で-20~19で表現する(低い方が優先される)
    - POSIXスレッドではFIFOとラウンドロビンで0~99、その他で0を設定できる(高い方が優先される)
  - スケジューリングポリシー
    - POSIXスレッドではFIFO(`SCHED_FIFO`)、ラウンドロビン(`SCHED_RR`)、その他(`SCHED_OTHER`)
  - POSIXスレッドではデフォルトでスケジューリングポリシー`SCHED_OTHER`、優先度0
- コンテキストスイッチ - 実行するプロセスが切り替わること
- 優先度の高いタスクがready状態になった場合、
  running状態のタスクを一旦中断し、
  優先度の高いタスクを実行する(プリエンプション)
  - プリエンプション後、再スケジューリングが行われる
- **マルチコアプロセッサ上では複数のプロセス・スレッドが同時に実行されるため、
  優先度の高いスレッドと低いスレッドが同時に実行される**

## スレッドの優先度とスケジューリングポリシーの設定・取得
- `pthread_setschedparam(3)` - スレッドの優先度とスケジューリングポリシーの設定
  - スレッドを高優先度にするためには実行時にroot権限が必要
- `pthread_getschedparam(3)` - スレッドの優先度とスケジューリングポリシーの取得
```
// sched_param構造体 - スケジューリングパラメータを管理する

struct sched_param {
  int sched_priority;
};
```
