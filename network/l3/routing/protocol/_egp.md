# EGP (Exterior Gateway Protocol)
- ネットワーク (AS) 間の動的ルーティングのための仕組み
- BGPが利用される

## AS (Autonomous System: 自律システム / Routing Domain: 経路制御ドメイン)
- 同一のルールやポリシーによって経路制御を管理するネットワークの単位
  - ASごとに内部で経路制御に関する方針を立て、その方針に従って経路制御が行われる
  - ASに属する組織はその管理者の指示に従って経路制御の設定を行う
- ネットワークの集合をASとしてまとめ、AS単位で一意なAS番号を振り、経路を制御する
- それぞれのASには16ビットのAS番号が割り当てられている
- AS間の経路制御にはBGP (Border Gateway Protocol) が利用される

#### ASに属する組織
- ISP (インターネットサービスプロバイダ)
- コンテンツ事業者
- 携帯電話事業者
- データセンタ事業者 など

#### ASを接続する組織
- IX (インターネットエクスチェンジ)
  - 運営者・運用方針・利用規約が異なるネットワーク同士を対等に接続するポイント

## BGP (Border Gateway Protocol)
- 経路ベクトル型のEGPプロトコル
  - 通過するASの数によって距離を計測する
  - 経路情報を交換する相手のルータとは論理的に接続を行う (ピアリング)
  - 各AS間の接続契約に基づいたパケット転送を行う
- ネットワークに変更があった際に差分アップデートを行う
- 目的とするネットワークアドレスにパケットを送った際、
  そこに到達するまでに通過するAS番号のリスト (AS経路リスト) を作る
- BGPスピーカー - 経路制御情報を交換するルータ
  - BGPスピーカーはAS間でBGPの情報を交換する全てのASと対等にBGPコネクションを確立する

#### iBGP (Internal BGP)
- 同一のAS内で使用されるBGP

#### eBGP (External BGP)
- 異なるAS間で使用されるBGP

### メッセージの種類
- OPEN - 接続開始
- UPDTE - 経路情報の交換
- NOTIFICARTION - エラー
- KEEPALIVE - 接続の確立や維持
- ROUTE-REFRESH - ピアに対してすべての経路情報を要求

## 参照
- Linuxプログラミングインターフェース 58章
- Software Design 2021年5月号 ハンズオンTCP/IP
- マスタリングTCP/IP 入門編
