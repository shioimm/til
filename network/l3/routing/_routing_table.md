# ルーティングテーブル (経路制御表)
- ルーター自身のNICとNICの経路先のネットワークの組み合わせを格納するテーブル
  - 一致するネットワークアドレスが複数ある場合、
    一致するビット列が長い方のネットワークアドレスを選択する
- 自機と直接的にはつながっておらず間接的につながっているネットワークのアドレスも持つことができる
  - 間接的につながっているネットワークについてはルーター同士で情報を交換して得る
- ノードはルーティングテーブルを保持・更新する
- ノードはルーティングテーブルに基づき、データグラムをルーターに向かって送出する
- IPはルーティングテーブルが正しい前提で機能するが、
  実際にルーティングテーブルが正しいかどうかを調べる機能を持たない
  - ルーティングテーブルが正しいかどうかはICMPが調べる

#### デフォルトルート
- ルーティングテーブルに登録されているどのアドレスにもマッチしない場合に採用される経路
  - `0.0.0.0/0` (IPv4) ・`0::0` (IPv6) または `default`で表される
- 一ホストにつき一デフォルトルートのみ設定できる

#### デフォルトゲートウェイ
- デフォルトルートが指し示すルーター
- 外部ネットワークのデフォルトの出口として利用される

#### ホストルート
- ルーターがパケットをホストへ転送するための経路
  - ネットワークインターフェースにつけたIPアドレスに基づいて経路制御を行う
  - IPアドレスの全てのルートを使って経路制御を行う
  - `IPアドレス/32` (IPv4) ・`IPアドレス/128` (IPv6) で表される
- e.g. ルーターのローカルルート、ループバックインタフェースのIPアドレス、PPPネイバールート

#### リンクローカルアドレス
- ルーターを超えない同一リンク内の通信に利用される経路
  - `169.254.0.0/16` (IPv4) ・`fe80::/10` (IPv6) で表される
- e.g. 固定IPが設定されていないホストでDHCPによるIPアドレスの取得ができなかった場合に設定されることがある

## ルーティングテーブルの集約
- 複数のサブネットワークから構成されているテーブルを、
  ネットワークアドレスのビットのパターンによって階層的に配置することによって
  ルーティングテーブルを集約することができる
- ノードが管理するルーティングテーブルのサイズを小さくすることにより、
  メモリ空間やCPUパワーを削減しIPの転送能力を向上させる

## 参照
- Linuxプログラミングインターフェース 58章
- Software Design 2021年5月号 ハンズオンTCP/IP
- マスタリングTCP/IP 入門編
