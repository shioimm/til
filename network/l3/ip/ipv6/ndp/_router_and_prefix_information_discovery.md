# ルータとプレフィクス情報の発見
## 使用するICMPv6メッセージタイプ
#### Router Advertisementメッセージ (ルータ広告)
- リンク上のホストが自身のアドレスを設定するために必要な情報
- ルータはRouter Advertisementメッセージを定期的にリンク内にマルチキャストする
- サブネット内のノードはRouter Advertisementメッセージからルータを発見する
- サブネット内のノードはRouter Advertisementメッセージに含まれているプレフィクス情報に
  インターフェースIDを加えることでIPv6アドレスを自動生成する (SLAAC)

#### Router Solicitationメッセージ (ルータ要請)
- ネットワークに接続されたホストからルータに対してRouter Advertisementメッセージを直ちに送信するように要求する
  - 機器にまだIPv6 アドレスが設定されていない場合は未定義アドレス (`::128`) が送信元 IPv6 アドレスになる

## 仕組み
1. 送信元ノードがEthernet上で近隣要請メッセージをマルチキャストする
  - 近隣要請メッセージはIPv6のマルチキャストアドレス (ff00::/8) を使用して送信される
2. マルチキャストの対象ノードがパケットを受信し、自身のIPアドレスを調べる
3. 対象のノードが近隣告知メッセージに自身のMACアドレスを格納し返送する
4. 送信元ノードは対象のノードが該当するIPアドレスとMACアドレスと紐づいていることを知る
  - IPアドレスとMACアドレスの対応関係はノードの近隣キャッシュに数分間キャッシュされる

## 参照
- プロフェッショナルIPv6 6.2
