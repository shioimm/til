# IPv6アドレス
- 128ビットサイズ (16ビットずつをコロンで区切り16進数で表記する)
- 一つのネットワークインターフェースに対して複数の種類のアドレスを割り当てられ、必要に応じて使い分ける
- 先頭のビットパターンでIPアドレスの種類を区別する
- IPv4射影IPv6アドレス - IPv4にのみ対応しているホストと通信する際のIPv4-mappedアドレス

## 構成
- `プレフィクス:インターフェースID/プレフィクス長`
- アドレス中0のみで表現されるグループは1グループに限り省略可能
- グループの先頭の0は省略可能

```
1111:0000:2222:0333:0044:0005:ffff:ffff

1111::2222:333:44:5:ffff:ffff
```

#### プレフィクス
- そのIPアドレスが属するネットワークを表す値

#### インターフェースID
 - 当該ネットワーク内の特定のネットワークインターフェースを表す値

## 種類
### ユニキャストアドレス
- ユニキャスト通信で使用するアドレス

#### グローバルユニキャストアドレス
- インターネット上で一意に識別できるアドレス (IANAによって割り当てられる)
- 先頭3ビット - 001 (`2000::/3`)

```
[プレフィクス] グローバルルーティングプレフィックス (48ビット)
[プレフィクス] サブネットID (16ビット)
[インターフェースID] (64ビット)
```

- グローバルルーティングプレフィックスはISPから割り当てられる
- サブネットIDは組織内などで自由に割り当てる

#### ユニークローカルアドレス
- 組織内で自由に割り当てられる一意なアドレス
- 先頭7ビット - 1111110 (`fc00::/7`)
  - 8ビット目が0の場合は未定義、1の場合はユニークローカルアドレスとして用いられる

```
[プレフィクス] 1111110
[プレフィクス] 1
[プレフィクス] グローバル識別子 (40ビット)
[プレフィクス] サブネットID (16ビット)
[インターフェースID] (64ビット)
```

#### リンクローカルユニキャストアドレス (fe80::/10)
- 一つのネットワーク内でのみ使用できるアドレス (ルーティングプロトコルなどで用いられる)
- 先頭10ビット - 1111111010 (fe80::/10)

```
[プレフィクス] 1111111010
[プレフィクス] 0 (54ビット)
[インターフェースID] (64ビット)
```

#### マルチキャストアドレス
- 当該ネットワーク内の特定の複数の端末を表すアドレス
  - IPv4ではブロードキャストアドレスが廃止され、
    マルチキャストアドレスによって代替される
- 先頭8ビット - 11111111 (ff00::/8)

```
[プレフィクス] 11111111
[プレフィクス] フラグ (4ビット)
[プレフィクス] スコープ (4ビット)
[グループID] (112ビット)
```

#### エニーキャストアドレス
- 複数の端末に同じグローバルユニキャストアドレスを設定し、
  エニーキャストアドレスであることを明示的に設定すると
  エニーキャストアドレスとして動作する
- エニーキャストアドレス宛に通信を行うと
  複数の端末の中でネットワークの経路上もっとも近い端末が通信を返す

## 参照
- Linuxプログラミングインターフェース 58章
- Software Design 2021年5月号 ハンズオンTCP/IP
- マスタリングTCP/IP 入門編
- パケットキャプチャの教科書
