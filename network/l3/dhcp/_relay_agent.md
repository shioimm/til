# DHCPリレーエージェント (DHCP Relay Agent)
- (前提) DHCPは同一Ethernetセグメントの端末にのみIPアドレスを払い出すことができる
  - 異なるネットワークにはブロードキャストパケットが届かないため
- DHCPリレーエージェントは異なるネットワークセグメント間でDHCPを利用してIPアドレスを配布するための機能
- DHCPリレーエージェントはDHCPクライアントとDHCPサーバ間の通信を中継する役割を果たす

### 動作フロー
#### DHCPリレーエージェントの準備
- 各ネットワークセグメントごとに一台ずつ設置
- 各ノードにDHCPサーバのIPアドレスを設定しておく

#### DHCPサーバの準備
- DHCPリレーエージェントと通信可能なネットワーク上のどこかに設置
- それぞれのセグメントごとに配布するIPアドレスの範囲を登録しておく

#### 動作
1. DHCPクライアント       -> DHCPリレーエージェント : DHCP要求パケットを送信
2. DHCPリレーエージェント -> DHCPサーバ             : 受信したDHCP要求パケットをユニキャストパケットにして転送
3. DHCPサーバ             -> DHCPリレーエージェント : 受信したDHCP要求パケットを処理し、応答を返す
4. DHCPリレーエージェント -> DHCPクライアント       : 受信した応答をDHCPクライアントへ転送

## 参照
- Linuxプログラミングインターフェース 58章
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 2.8-9
- Linuxで動かしながら学ぶTCP/IPネットワーク入門 4.5
- コンピュータネットワーク
- マスタリングTCP/IP 入門編
- 実践パケット解析 第3版
