# IPv4アドレス
- 32ビットサイズ (8ビットずつドットで区切り10進数で表記する)
- `ネットワーク部 . ホスト部 / プレフィックス長`
  - ネットワーク部はデータリンクのセグメントごとに重複しない値が割り当てられる
    - 同じセグメントに接続されているノードのネットワークインターフェースには同じ値が設定される
    - IPパケットが途中のルーターで転送される際は宛先IPアドレスのネットワーク部を利用する
  - ホスト部は同一セグメント内で重ならない値が割り当てられる
- ループバックアドレス - 127.0.0.1

## CIDR (Classless InterDomain Routing) による表現
- クラスA・B・Cのネットワークを小さく区切るサブネットワークアドレスを利用する
  - ホスト部をサブネットワークアドレス部として使うことにより複数の物理ネットワークに分割する
  - サブネットマスク - IPアドレスと同じ構造を持つ32ビットの正値
    - IPアドレスのどの部分がネットワークアドレスでどの部分がホストアドレスかを識別するために用いる
    - ネットワーク部を表すビット数と同じ桁の部分が1
    - ホスト部を表すビット数と同じ桁の部分が0
- プレフィックス長を用いてネットワークIDとホストIDの区切りを示す (CIDR記法)

```
192.0.2.1/24 - プレフィックス長 (24つ目) で区切る

11000000 00000000 00000010 00000001 - 2進数 (192.0.2.1)
11111111 11111111 11111111 00000000 - サブネットマスク

11000000 00000000 00000010 00000000 - ネットワーク部 (192.000.002.000)
00000000 00000000 00000000 00000001 - ホスト部 (000.000.000.001)
```

## クラスによる表現(初期のIPで使用)
- Aクラス - 先頭1ビットが0、先頭から8ビットまでがネットワーク部
  - 0.0.0.0 ~ 127.255.255.255.255
  - ユニキャスト・大規模ネットワーク
- Bクラス - 先頭2ビットが10、先頭から16ビットまでがネットワーク部
  - 128.0.0.0 ~ 191.255.255.255.255
  - ユニキャスト・中規模ネットワーク
- Cクラス - 先頭3ビットが110、先頭から24ビットまでがネットワーク部
  - 192.0.0.0 ~ 223.255.255.255.255
  - ユニキャスト・小規模ネットワーク
- Dクラス - 先頭4ビットが1110、先頭から32ビットまでがネットワーク部
  - 224.0.0.0 ~ 239.255.255.255.255
  - マルチキャスト

## 種類
### グローバルアドレス / プライベートアドレス
- グローバルアドレス - インターネット上の一意なアドレス
- プライベートアドレス - 組織内の一意なアドレス
- プライベートアドレスとグローバルアドレスを相互に変換するためにNATを利用する

## 端末に設定できないアドレス (除外アドレス)
- ネットワークアドレス
  - ホスト部のビットが全て0
  - ネットワークそのものを示す
- デフォルトルートアドレス
  - IPアドレス、サブネットマスクのビットが全て0
  - 全てのネットワークを示す
- ブロードキャストアドレス
  - ホスト部のビットが全て1
  - 当該ネットワーク上のすべての端末を示す
- ループバックアドレス
  - 第一オクテットが127 (127.0.0.1を使用する場合が多い)
  - 当該端末自身を示す

## 参照
- Linuxプログラミングインターフェース 58章
- Software Design 2021年5月号 ハンズオンTCP/IP
- マスタリングTCP/IP 入門編
- パケットキャプチャの教科書
