# SOCKSプロキシ
- L4層での通信を透過的に中継するSOCKSプロトコルを利用したプロキシ
  - クライアントがSOCKSサーバーに対して専用のコマンドを発行しサーバーへのメッセージ転送を要求
  - リクエスト成功後、SOCKSサーバーが透過的にクライアント - サーバーの通信をプロキシする

#### SOCKSプロトコル
- TCP、UDPの通信を代理するプロキシのためのプロトコル
  - SOCKS4
  - SOCKS4a
  - SOCKS5 (RFC1928)
- SOCKSサーバ（sockd）によって内部ネットワークのクライアントと
  外部ネットワークのサーバー間の通信を中継する

#### SOCKS5による透過プロキシ
1. クライアント - SOCKSサーバー間で3wayハンドシェイクを用いてTCPコネクションを確立
2. クライアント -> SOCKSサーバー: 認証のリクエストを送信
3. クライアント <- SOCKSサーバー: 認証のレスポンスを返却
4. クライアント -> SOCKSサーバー: CONNECT | BIND | UDP ASSOCIATコマンドの発行
5. クライアント <- SOCKSサーバー: 準備完了のレスポンスを返却
6. SOCKSサーバー - サーバー間で3wayハンドシェイクを用いてTCPコネクションを確立
7. クライアント <- SOCKSサーバー: 準備完了のレスポンスを返却
8. クライアント -> SOCKSサーバー: SOCKS5によってカプセル化したアプリケーションメッセージを送信
9. SOCKSサーバー -> サーバー: SOCKS5によるカプセル化を解除したアプリケーションメッセージを送信
7. SOCKSサーバー <- サーバー: レスポンスを送信
8. クライアント <- SOCKSサーバー: SOCKS5によってカプセル化したアプリケーションメッセージを送信

## 参照
- [SOCKS](https://e-words.jp/w/SOCKS.html)
- [SOCKSプロキシとHTTPプロキシの違いについて勉強してみた](https://dev.classmethod.jp/articles/socks-proxy-and-http-proxy/)
