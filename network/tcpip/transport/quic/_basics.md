# QUIC
- UDP(下位層) + QUICで一つのトランスポートプロトコル

## 機能
- 認証・暗号化の提供
- 低遅延のコネクション管理
- 多重化
  - 1コネクションで複数のストリームを同時に扱う
- 再送処理
  - TCPよりもきめ細かくRTT時間を計測し、高精度な再送処理を行う
- ストリームレベルの再送制御とコネクションレベルのフロー制御
  - 一つのストリームでパケットの喪失が起きても他のストリームの通信は続く
  - ストリーム全体でフロー制御を行う
- コネクションのマイグレーション
  - IPアドレスが変わった場合もコネクションが維持されるようにする

## TCPに対する優位性
#### トランスポート層でのHOLブロッキングの解消
- TCPはパケットロス時、後続のパケットを受信できていたとしても
  パケットロスしたデータが回復されるまでアプリケーションにデータを渡さない
- QUICはパケットロス時、受信できた後続のパケットのデータはアプリケーションに渡され処理が進められる

#### コネクションIDによるコネクションの識別
- TCPは5タプルでコネクションを識別し、一つでも変わると通信を継続できない
  - 5タプル - 送信元IPアドレス/送信先IPアドレス/IPヘッダプロトコル/送信元ポート番号/送信先ポート番号
- QUICはコネクションIDでコネクションを識別し、IPアドレスやポート番号が変わっても通信を継続できる

#### パケット番号による再送制御の効率化
- TCPはパケットロスがあった場合、ロスしたパケット全体をそのまま再送する
- QUICはパケットロスがあった場合、ロスしたパケットに含まれていたデータのうち
  再送する必要があるもののみを新しいパケット番号を付与したパケットで再送する

#### トランスポート層の制御情報の暗号化
- TCPは上位層にTLSを利用してアプリケーションデータを暗号化する
- QUICはTLSを内部的に使用しアプリケーションデーおよび制御メッセージを暗号化する

#### アップグレードの容易性
- TCPはユーザーが利用するOSやカーネルのバージョンアップによって新機能が提供される
- QUICはユーザーランドで動作するアプリケーションによって新機能が提供される

## 仕様
- QUIC: A UDP-Based Multiplexed and Secure Transport(RFC 9000)
  - トランスポートプロトコルとしての機能の定義
- Using TLS to Secure QUIC(RFC 9001)
  - パケットロスの検出や輻輳制御の定義
- QUICLossDetectionandCongestionControl(RFC 9002)
  - 暗号化の定義

## 参照
- マスタリングTCP/IP 入門編
- [HTTP/3はどうやってWebを加速するか？ TCP、TLS、HTTP/2の問題とHTTP/3での解決策～Fastly奥氏が解説（前編）](https://www.publickey1.jp/blog/21/http3web_tcptlshttp2http3fastly.html)
- [HTTP/3はどうやってWebを加速するか？ TCP、TLS、HTTP/2の問題とHTTP/3での解決策～Fastly奥氏が解説（後編）](https://www.publickey1.jp/blog/21/http3web_tcptlshttp2http3fastly_1.html)
- WEB+DB PRESS Vol.123 HTTP/3入門
