# PPP (Point-to-Point Protocol)
- ノード間 (e.g. ユーザー側の機器 - ISP側の機器) を1:1の論理的な経路で結び、
  PPPヘッダを付与したIPパケットを送受信するプロトコル
  - データリンク - PPPによって作られた論理的な通信路
- EthernetやFDDIなどとは異なり、物理層の規格について定義しておらずどんな回線でも利用可能
  - 電話回線、ISDN、専用回線、ATM回線で使用される

#### 特徴
- データ通信開始時に物理層レベルでコネクションを確立した後、PPPレベルでコネクションを確立する
- コネクション確立時には認証・圧縮・暗号化の設定を行う
- LCPとNCPによって構成される

## 認証
- LCPでできたデータリンクの上で認証を行う
- 通常ユーザーIDやパスワードによる認証が双方向に行われる
- 認証プロトコルにはPAPかCHAPを利用する
  - PAP - Password Authentication Protocol
    - クライアントがサーバーに対しユーザーID・パスワードを送信する
    - パスワードは暗号化されず平文のまま送信される
  - CHAP - Challlenge Handshake Authentication Protocol
    - サーバーがクライアントへChalllenge (ユーザーID・パスワードを含むハッシュ値) を送信する
    - クライアントはChalllengeから算出したユーザーID・パスワードを送信する

## LCP (Link Control Protocol)
- コネクションの確立・切断、パケット長の設定、
  認証プロトコルの設定、通信品質の管理をするかどうかなどの設定を行う
- 通信開始後はデータリンクの状態を監視する
- 通信終了時にデータリンクの切断を行う

## NCP (Network Control Protocol)
- ネットワーク層レベルの設定を行う
- INCP - 上位層がIPの場合のNCP
  - IPアドレスの設定、TCP／IPのヘッダ圧縮をするかどうかなどのやりとりを行う

## 接続処理プロセス
1. リンク確立フェーズ
2. 認証フェーズ
3. ネットワーク層プロトコルフェーズ
4. リンク維持フェーズ
5. リンク終了フェーズ

## フレームフォーマット
- フラグ (1バイト)
- アドレス (1バイト)
- 制御 (1バイト)
- タイプ (1バイト)
- ペイロード
- FCS (4バイト)

- フラグシーケンス - フレームの区切りを示すビット列(`01111110`)

## 参照
- マスタリングTCP/IP 入門編
- パケットキャプチャの教科書
