# リンク層 (ネットワークインターフェース層)
- ネットワークの物理リンク上へフレームを送信し、宛先からの確認応答を受信する
  - ネットワーク層からのデータグラムをフレーム単位にカプセル化して送受信する
- 送信時には各フレームの宛先アドレス・フレームサイズをヘッダとして付加する
  - MTU (最大転送ユニット) - フレームサイズ上限
  - MTUの最大値はPath MTU Discovery技術 (内部的にICMPを使用) によって探索される
- 物理層で発生した誤りを検出したり、訂正したりする
  - 送信元はビットストリームを不連続なフレームに区切り、フレームごとにチェックサムを付与する
  - 送信先はビットストリームを不連続なフレームに区切り、フレームごとにチェックサムを再計算する

### 副層
#### MAC層 (Media Access Control: 媒体アクセス制御層)
- EthernetやFDDIなどのデータリンクごとに決まっているヘッダや制御

#### LLC層 (Logical Link Control: 論理リンク制御層)
- データリンクの違いによらず共通になっているヘッダや制御

### フォワーディングテーブル (MACアドレステーブル)
- ブリッジの各ポート・ポートに接続された各ネットワーク機器のMACアドレス・VLAN IDの対応表
- データリンク層の各通過点はパケットを受け取った際、
  そのパケットの送信元MACアドレスとインターフェースの組み
  フォワーディングテーブルに書き込み、一定時間保持する

### 動作の仕組み
1. ブリッジはフレームを受信し、ブリッジ内部のメモリに一旦蓄積する
2. ブリッジはフレームの送信先MACアドレスを読み取り、フォワーディングテーブルを利用して送信先を確認する
3. ブリッジは該当MACアドレスを持つ機器の接続されたポートに向かってフレームを送信する
- ブロードキャスト通信においては、同じブリッジが担う範囲において複数のネットワーク機器へフレームを送出する
  データリンク層のハードウェアはフロー制御の必要がない程度に十分に早く動作するよう設計される

### スパニングツリー
- ブリッジ間の通信のループを検出し、解消する機能

### リンクアグリゲーション
- LANスイッチ間を複数のリンクで接続することで耐障害性の向上と高速化を図る仕組み

### LLDP
- ネットワークに接続されている機器の情報を収集する仕組み
  - ネットワーク機器は自身のホスト名や機器情報、ポート・インターフェース情報を
    定期的にマルチキャストMACアドレスへ送信する
  - 情報を収集する機器はLLDPパケットを受信することで情報を収集する

## ネットワークの接続形態
### 媒体共有型ネットワーク
- 通信媒体を複数のノードで共有するネットワーク
- 同じ通信路を利用してデータの送受信する制御も行う
  - 半二重通信(送信している間は受信できず、受信している間は送信できない通信)
  - 通信の優先権を制御する仕組みが必要

### 媒体共有型ネットワークの実装方式
- CSMA方式 - 同じ通信媒体を共有するノード同士でデータの送信権を競争で奪い取る方式
- CSMA/CD方式 - CSMA方式を改良し、衝突を早期に検出して素早く通信路を解放する制御を加えた方式
- トークンパッシング方式 - トークンパケットを巡回させ、トークンによって送信権を制御する方式

### 媒体非共有型ネットワーク
- ノード同士で通信媒体を共有せずにそれぞれ専有する方式
- ノードはスイッチに直接接続され、スイッチがフレームを転送する
  - 全二重通信 (送信と受信を同時に行える通信)
  - 衝突が発生しないため効率良く通信可能
  - スイッチに高度な機能を持たせることにより仮想的なネットワークの構築やデータ流量の制御も可能
  - スイッチ技術をEthernetなどでも利用できるようにした機器 - スイッチングハブ・Ethernetスイッチ
    - Ethernetスイッチは複数のポートを持ったブリッジに等しい

## 参照
- Linuxプログラミングインターフェース 58章
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 2.8-9
- Linuxで動かしながら学ぶTCP/IPネットワーク入門 4.5
- コンピュータネットワーク
- マスタリングTCP/IP 入門編
- パケットキャプチャの教科書
