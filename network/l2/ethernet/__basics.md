# Ethernet (IEEE802.3)
- LAN (Local Area Network) における代表的規格 (データリンク層 + 物理層)
- ハブを中心としてスター型で構成される
  - 複数のホストやルーターが同一のEthernetに接続され、ローカルネットが構成される
  - 通信相手を識別するためにMACアドレスを使用する
- 用途によって通信ケーブル (種類・長さ) や伝送速度が異なる規格 (種類) が数多く存在する

### 接続形態
#### 媒体共有型ネットワーク (CSMA/CD)
- 複数の端末で一本の同軸ケーブルを共有する
  - CS (carrier sensing) - キャリア検出 (キャリア波の有無から通信可能かを判断)
  - MA (multi-access) - マルチアクセス形式
  - CD (collision detection) - 衝突検出 (フレームが衝突を検知したホストがジャム信号を送信する)
- Ethernetの普及当初、一般的に利用されていた

#### 媒体非共有型ネットワーク
- 端末とスイッチの間を専有のケーブルで接続する
- スイッチングハブによって機器間の専有ケーブルを実現できるようになったため現在の主流になっている

## フレームフォーマット
### プリアンブル (7バイト)
- フレームの開始を示す
- `10101010` * 7

### SFD (1バイト)
- フレームの開始を示す
- `10101011`

### 宛先MACアドレス
- 宛先MACアドレス

### 送信元MACアドレス (6バイト)
- 送信元MACアドレス

### 長さ / タイプ (2バイト)
- 値の範囲が `0000` ~ `05DC` - ペイロードの長さを表す
- 値の範囲が `0600` ~ `FFFF` - EtherType (L3プロトコルの種類)
- ネットワーク層で使用するプロトコルを表現する値

### ペイロード (46バイト ~ 1500バイト (MTU) )
- IPパケット (+ パディング)

### FCS (Frame Check Sequence) (4バイト)
- ペイロードが壊れていないかどうかを示す

#### Qタグ付きフレーム
- 送信元MACアドレスフィールドと長さ / タイプフィールドの間にVLAN固有のフィールドが4バイト分追加される
  - TPID (2バイト)
    - `0x8100`
  - TCI (2バイト)
    - PCP (Priority Code Point)
    - CFI (Canonical Format Indicator)
    - VID (VLAN ID)

#### ジャンボフレーム
- 最大で9000バイト前後までペイロードを増やすことができるEthernetフレーム
- 標準規格化されておらずベンダー依存性が高い
- 自機・宛先および宛先までの経路上にあるすべてのスイッチングハブが
  ジャンボフレーム対応していないと利用できない

## 参照
- Software Design 2021年5月号 ハンズオンTCP/IP
- マスタリングTCP/IP
- パケットキャプチャの教科書
