# CDN
- Content Delivery Network
- AS同士の接続を補助し、ネットワークの高速化や安定性の向上をもたらす
  - AS(Autonomous System) - インターネットプロバイダの提供する各ネットワーク
  - インターネットはAS同士が木構造に連結された全体を指す
  - 木構造の最上位からTier1、Tier2、Tier3...とASごとに名前がつけられている
  - ユーザーがWebアクセスを行う際、目的のサービスが見つかるまで階層構造をたどる

## CDNを構成する機能
- 通信そのものの高速・安定化
  - ネットワークの木構造をショートカットのようにつなぐ
- ユーザーに近い高機能なプロキシサーバー
  - ユーザー(リクエストの発信元)から物理的に近いサーバーからデータを配信する
  - DDoS攻撃への対応を行う
  - 不正アクセスのパターンを検知しリクエストを止める(WAF)
  - 高度で高速なキャッシュ機能を提供する

## コンテンツキャッシュ
- `コンテンツを特定するキー:コンテンツ自身`の組みを有効期限つきで管理する仕組み

### キャッシュ制御に影響するレスポンスヘッダ
- `Cache-Control` - クライアントやプロキシにキャッシュ可否・条件・有効期限を伝える
- `Last-Modified` - コンテンツの最終更新日時
- `Etag` - コンテンツの同一性
- `Expires` - コンテンツの有効期限
- `Vary` - キャッシュ共有可能範囲を識別する値をプロキシに指示する
- `Cookie` - Cookieが設定されているレスポンスはキャッシュしないプロキシが多い

## CDNの注意点
- 高速通信としての用途において、オリジンサーバーへのホップ数が増えるため
  ユーザーのIPアドレスを得ることが難しい
- キャッシュとしての用途において、運用に失敗した場合のユーザーへの影響が大きい

## 参照
- よくわかるHTTP/2の教科書P26-27
- サーバ・インフラエンジニアの基本がこれ一冊でしっかり身につく本 5
- Real World HTTP 第2版
